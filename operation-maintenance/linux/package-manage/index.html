<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <meta name="keywords" content="dumi, umijs, aslkami, 安了个装, 樂下独舞" />
    <meta name="description" content="dumi, 记录个人js知识点" />
    <link rel="shortcut icon" type="image/x-icon" href="/images/hunter.jpeg" />
    <link rel="stylesheet" href="/umi.css" />
    <script>
      window.routerBase = "/";
    </script>
    <script>
      //! umi version: 3.5.34
    </script>
    <script>
      !(function () {
        var e = localStorage.getItem("dumi:prefers-color"),
          t = window.matchMedia("(prefers-color-scheme: dark)").matches,
          r = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === r[2] ? (t ? r[1] : r[0]) : r.indexOf(e) > -1 ? e : r[0]
        );
      })();
    </script>
    <title>服务与包管理 - 安了个装</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/operation-maintenance/linux/package-manage" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/images/hunter.jpeg&#x27;)" href="/">安了个装</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span><a href="/base">基础</a></span><span><a href="/node">Node</a><ul><li><a href="/node/base">Node 基础</a></li><li><a href="/node/promise">Promise</a></li></ul></span><span><a aria-current="page" class="active" href="/operation-maintenance">前端运维</a></span><span><a href="/pack-tool">前端工程化</a></span><span><a href="/react">React</a></span><span><a href="/css">CSS</a></span><span><a href="/question">问题汇总</a></span><span><a target="_blank" rel="noopener noreferrer" href="https://aslkami-vue.netlify.app/">Vue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span><span>博客<ul><li><a target="_blank" rel="noopener noreferrer" href="https://aslkami.gatsbyjs.io">gatsby 博客<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="https://aslkami.netlify.app">hexo 博客<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="/fund">基金学习</a></li></ul></span><span><a target="_blank" rel="noopener noreferrer" href="https://github.com/aslkami/aslkami.github.io">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span><div class="__dumi-default-navbar-tool"><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/images/hunter.jpeg&#x27;)" href="/"></a><h1>安了个装</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/base">基础</a></li><li><a href="/node">Node</a><ul><li><a href="/node/base">Node 基础</a></li><li><a href="/node/promise">Promise</a></li></ul></li><li><a aria-current="page" class="active" href="/operation-maintenance">前端运维</a></li><li><a href="/pack-tool">前端工程化</a></li><li><a href="/react">React</a></li><li><a href="/css">CSS</a></li><li><a href="/question">问题汇总</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://aslkami-vue.netlify.app/">Vue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li>博客<ul><li><a target="_blank" rel="noopener noreferrer" href="https://aslkami.gatsbyjs.io">gatsby 博客<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="https://aslkami.netlify.app">hexo 博客<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="/fund">基金学习</a></li></ul></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/aslkami/aslkami.github.io">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a href="/operation-maintenance/cicd">CICD</a><ul><li><a href="/operation-maintenance/cicd"><span>持续集成</span></a></li></ul></li><li><a href="/operation-maintenance/docker">Docker</a><ul><li><a href="/operation-maintenance/docker/introduce"><span>Docker 介绍</span></a></li><li><a href="/operation-maintenance/docker/base"><span>Docker 基础</span></a></li><li><a href="/operation-maintenance/docker/advance"><span>Docker 进阶</span></a></li><li><a href="/operation-maintenance/docker/project"><span>Node 项目</span></a></li></ul></li><li><a href="/operation-maintenance/k8s">K8S</a><ul><li><a href="/operation-maintenance/k8s"><span>k8s 入门</span></a></li><li><a href="/operation-maintenance/k8s/base"><span>k8s 基础</span></a></li><li><a href="/operation-maintenance/k8s/advance"><span>k8s 进阶</span></a></li><li><a href="/operation-maintenance/k8s/project"><span>项目实战</span></a></li></ul></li><li><a aria-current="page" class="active" href="/operation-maintenance/linux">Linux</a><ul><li><a href="/operation-maintenance/linux"><span>基础</span></a></li><li><a href="/operation-maintenance/linux/vi-editor"><span>Vi 编辑器</span></a></li><li><a href="/operation-maintenance/linux/user-group"><span>用户和用户组</span></a></li><li><a href="/operation-maintenance/linux/auth"><span>权限</span></a></li><li><a href="/operation-maintenance/linux/shell"><span>Shell</span></a></li><li><a aria-current="page" class="active" href="/operation-maintenance/linux/package-manage"><span>服务与包管理</span></a></li><li><a href="/operation-maintenance/linux/system"><span>linux 进程</span></a></li><li><a href="/operation-maintenance/linux/network"><span>网络</span></a></li><li><a href="/operation-maintenance/linux/install"><span>常用软件安装</span></a></li></ul></li><li><a href="/operation-maintenance/nginx">Nginx</a><ul><li><a href="/operation-maintenance/nginx/introduce"><span>Nginx 介绍</span></a></li><li><a href="/operation-maintenance/nginx/base"><span>Nginx 基础</span></a></li><li><a href="/operation-maintenance/nginx/advance"><span>Nginx 进阶</span></a></li></ul></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="服务简介和分类" data-depth="2"><a href="/operation-maintenance/linux/package-manage#服务简介和分类"><span>服务简介和分类</span></a></li><li title="运行级别" data-depth="3"><a href="/operation-maintenance/linux/package-manage#运行级别"><span>运行级别</span></a></li><li title="服务的分类" data-depth="3"><a href="/operation-maintenance/linux/package-manage#服务的分类"><span>服务的分类</span></a></li><li title="服务与端口" data-depth="3"><a href="/operation-maintenance/linux/package-manage#服务与端口"><span>服务与端口</span></a></li><li title="查询系统中监听的端口" data-depth="3"><a href="/operation-maintenance/linux/package-manage#查询系统中监听的端口"><span>查询系统中监听的端口</span></a></li><li title="软件包管理" data-depth="2"><a href="/operation-maintenance/linux/package-manage#软件包管理"><span>软件包管理</span></a></li><li title="软件包的分类" data-depth="3"><a href="/operation-maintenance/linux/package-manage#软件包的分类"><span>软件包的分类</span></a></li><li title="RPM 命令" data-depth="3"><a href="/operation-maintenance/linux/package-manage#rpm-命令"><span>RPM 命令</span></a></li><li title="repo" data-depth="3"><a href="/operation-maintenance/linux/package-manage#repo"><span>repo</span></a></li><li title="RPM包的默认安装位置" data-depth="3"><a href="/operation-maintenance/linux/package-manage#rpm包的默认安装位置"><span>RPM包的默认安装位置</span></a></li><li title="启动命令" data-depth="3"><a href="/operation-maintenance/linux/package-manage#启动命令"><span>启动命令</span></a></li><li title=" 防火墙" data-depth="3"><a href="/operation-maintenance/linux/package-manage#防火墙"><span> 防火墙</span></a></li><li title="自启动服务" data-depth="3"><a href="/operation-maintenance/linux/package-manage#自启动服务"><span>自启动服务</span></a></li><li title="YUM在线管理" data-depth="2"><a href="/operation-maintenance/linux/package-manage#yum在线管理"><span>YUM在线管理</span></a></li><li title="YUM命令" data-depth="2"><a href="/operation-maintenance/linux/package-manage#yum命令"><span>YUM命令</span></a></li><li title="源码包服务管理" data-depth="2"><a href="/operation-maintenance/linux/package-manage#源码包服务管理"><span>源码包服务管理</span></a></li><li title="安装nginx" data-depth="3"><a href="/operation-maintenance/linux/package-manage#安装nginx"><span>安装nginx</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h2 id="服务简介和分类"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/package-manage#服务简介和分类"><span class="icon icon-link"></span></a><code>服务简介和分类</code></h2><h3 id="运行级别"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/package-manage#运行级别"><span class="icon icon-link"></span></a><code>运行级别</code></h3><p><code>1. 运行级别分类</code></p><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">运行级别</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">0</td><td align="left">关机</td></tr><tr><td align="left">1</td><td align="left">单用户,类似于 Window 的安全模式，主要用于系统修复</td></tr><tr><td align="left">2</td><td align="left">不完全多用户，类似于字符界面，但不包含 NFS(Linux 和 Window 进行文件共享)服务</td></tr><tr><td align="left">3</td><td align="left">完整的命令行模式，就是标准的字符界面</td></tr><tr><td align="left">4</td><td align="left">系统保留未使用</td></tr><tr><td align="left">5</td><td align="left">图形界面</td></tr><tr><td align="left">6</td><td align="left">重启</td></tr></tbody></table></div></div><p><code>2. 查看上一个级别和当前级别</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">runLevel</span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># N 3</span></div></pre></div><p><code>3. 切换运行级别</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">init </span><span class="token number">5</span></div></pre></div><p><code>4. 设置默认运行级别</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">vi</span><span class="token plain"> /etc/inittab</span></div><div class="token-line"><span class="token plain">id:3:initdefault:</span></div></pre></div><h3 id="服务的分类"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/package-manage#服务的分类"><span class="icon icon-link"></span></a><code>服务的分类</code></h3><ul><li>系统开启的服务越少，服务器就会更加稳定和安全</li><li>服务安装方式不同，启动的方式也不同</li></ul><p><code>1. 服务管理的方式</code></p><ul><li>RPM 包安装的服务,由软件包作者指定安装位置,独立的服务，绝大多数服务都是独立运行在内存中的，可以直接响应客户端的请求</li><li>源码包安装的服务，由我们用户决定安装位置</li></ul><p><code>2. 查看RPM包安装的服务</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">chkconfig</span><span class="token plain"> --list</span></div></pre></div><p><code>3. 查看源码包安装的服务</code></p><ul><li>查看自定义的安装位置，默认为/usr/local 下</li><li>usr= Unix System Resource 系统资源</li></ul><p><code>4. 启动和自启动</code></p><ul><li>启动服务就是指让此服务在当前系统中运行，并向客户端提供服务</li><li>服务自启动就是指通过设置，让此服务在开机或者重启后随着系统启动而自动启动</li></ul><h3 id="服务与端口"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/package-manage#服务与端口"><span class="icon icon-link"></span></a><code>服务与端口</code></h3><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">ps</span><span class="token plain"> -aux </span><span class="token comment"># 查看系统中的运行中的进程</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">cat</span><span class="token plain"> /etc/services </span><span class="token comment"># 查看常见服务端口</span></div></pre></div><h3 id="查询系统中监听的端口"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/package-manage#查询系统中监听的端口"><span class="icon icon-link"></span></a><code>查询系统中监听的端口</code></h3><ul><li>netstat -tulnp</li></ul><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">参数</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">-t</td><td align="left">列出 tcp 数据</td></tr><tr><td align="left">-u</td><td align="left">列出 udp 数据</td></tr><tr><td align="left">-l</td><td align="left">列出正在监听的网络服务</td></tr><tr><td align="left">-n</td><td align="left">用端口号来显示服务，而非服务名</td></tr><tr><td align="left">-p</td><td align="left">列出该服务的进程 ID</td></tr></tbody></table></div></div><h2 id="软件包管理"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/package-manage#软件包管理"><span class="icon icon-link"></span></a><code>软件包管理</code></h2><ul><li>RPM 是 RedHat Package Manager（RedHat 软件包管理工具）类似 Windows 里面的&quot;添加/删除程序&quot;</li><li>RPM 是 Red Hat 公司随 Redhat Linux 推出了一个软件包管理器，通过它能够更加轻松容易地实现软件的安装</li><li>RPM 是 LINUX 下的一种软件的可执行程序，你只要安装它就可以了。这种软件安装包通常是一个 RPM 包（Redhat Linux Packet Manager，就是 Redhat 的包管理器），后缀是.rpm</li></ul><h3 id="软件包的分类"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/package-manage#软件包的分类"><span class="icon icon-link"></span></a><code>软件包的分类</code></h3><ul><li><p>源码包(需要经过编译，把人所编写的源代码编译成机器语言才能运行)</p><ul><li>优点<ul><li>开源免费</li><li>可以自由配置功能</li><li>编译安装更适合自己系统，更稳定</li><li>卸载方便</li></ul></li><li>缺点<ul><li>安装过程比较复杂</li><li>编译过程比较长</li><li>安装过程一旦报错，非常难以排查</li></ul></li></ul></li><li><p>二进制包(把源代码包经过编译生成 0/1 二进制，PRM 包、系统默认的安装包)</p><ul><li>优点<ul><li>包管理系统比较简单，只要通过简单的命令就可以实现包的安装、升级、查询和卸载</li><li>安装速度比源码包快很多</li></ul></li><li>缺点<ul><li>经过编译则不能看到源代码</li><li>功能选择不灵活</li><li>依赖性比较麻烦</li></ul></li></ul></li><li><p>脚本安装包(就是把复杂的安装过程写成了脚本，可以一键安装，本质上安装的还是源代码包和二进制包)</p><ul><li>优点是安装简单</li><li>缺点是失去了自定义性</li></ul></li></ul><h3 id="rpm-命令"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/package-manage#rpm-命令"><span class="icon icon-link"></span></a><code>RPM 命令</code></h3><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">用途</th><th align="left">命令</th><th align="left">注释</th></tr></thead><tbody><tr><td align="left">安装软件</td><td align="left">执行 rpm -ivh rpm 包名</td><td align="left">其中 i 表示安装 install，v 表示显示安装过程 verbose，h 表示显示进度</td></tr><tr><td align="left">升级软件</td><td align="left">执行 rpm -Uvh rpm 包名</td><td align="left">U 表示升级 update</td></tr><tr><td align="left">反安装</td><td align="left">执行 rpm -e rpm 包名</td><td align="left"></td></tr><tr><td align="left">查询软件包的详细信息</td><td align="left">执行 rpm -qpi rpm 包名</td><td align="left"></td></tr><tr><td align="left">查询某个文件是属于那个 rpm 包的</td><td align="left">执行 rpm -qf rpm 包名</td><td align="left"></td></tr><tr><td align="left">查该软件包会向系统里面写入哪些文件</td><td align="left">执行 rpm -qpl rpm 包名</td><td align="left"></td></tr></tbody></table></div></div><h3 id="repo"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/package-manage#repo"><span class="icon icon-link"></span></a><code>repo</code></h3><ul><li>repo 文件是 yum 源（软件仓库）的配置文件，通常一个 repo 文件定义了一个或者多个软件仓库的细节内容，例如我们将从哪里下载需要安装或者升级的软件包，repo 文件中的设置内容将被 yum 读取和应用</li><li>服务器端：在服务器上面存放了所有的 RPM 软件包，然后以相关的功能去分析每个 RPM 文件的依赖性关系，将这些数据记录成文件存放在服务器的某特定目录内。</li><li>客户端：如果需要安装某个软件时，先下载服务器上面记录的依赖性关系文件(可通过 WWW 或 FTP 方式)，通过对服务器端下载的纪录数据进行分析，然后取得所有相关的软件，一次全部下载下来进行安装。</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">cat</span><span class="token plain"> /etc/yum.conf</span></div><div class="token-line"><span class="token plain">/etc/yum.repos.d</span></div><div class="token-line"><span class="token plain">/etc/yum.repos.d/nginx.repo</span></div></pre></div><h3 id="rpm包的默认安装位置"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/package-manage#rpm包的默认安装位置"><span class="icon icon-link"></span></a><code>RPM包的默认安装位置</code></h3><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">文件</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">/etc</td><td align="left">配置文件位置</td></tr><tr><td align="left">/etc/init.d</td><td align="left">启动脚本位置</td></tr><tr><td align="left">/etc/sysconfig</td><td align="left">初始化环境配置文件位置</td></tr><tr><td align="left">/var/lib</td><td align="left">服务产生的数据放在这里</td></tr><tr><td align="left">/var/log</td><td align="left">日志</td></tr></tbody></table></div></div><h3 id="启动命令"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/package-manage#启动命令"><span class="icon icon-link"></span></a><code>启动命令</code></h3><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">服务名</th><th align="left">命令</th><th align="left">注释</th></tr></thead><tbody><tr><td align="left">/etc/init.d/独立的服务名</td><td align="left">start stop status restart</td><td align="left">Linux 通用命令</td></tr><tr><td align="left">service 独立的服务名</td><td align="left">start stop status restart</td><td align="left">ReactHat 特有的命令</td></tr></tbody></table></div></div><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">rpm</span><span class="token plain"> -ivh http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm</span></div><div class="token-line"><span class="token plain">yum info nginx</span></div><div class="token-line"><span class="token plain">yum </span><span class="token function">install</span><span class="token plain"> -y nginx</span></div><div class="token-line"><span class="token plain">/etc/init.d/nginx start</span></div><div class="token-line"><span class="token plain"></span><span class="token function">netstat</span><span class="token plain"> -ltun</span></div><div class="token-line"><span class="token plain"></span><span class="token function">service</span><span class="token plain"> nginx status</span></div><div class="token-line"><span class="token plain"></span><span class="token function">curl</span><span class="token plain"> http://localhost</span></div></pre></div><h3 id="防火墙"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/package-manage#防火墙"><span class="icon icon-link"></span></a><code> 防火墙</code></h3><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">操作</th><th align="left">命令</th></tr></thead><tbody><tr><td align="left">查询防火墙状态</td><td align="left">service iptables status</td></tr><tr><td align="left">停止防火墙</td><td align="left">service iptables stop</td></tr><tr><td align="left">启动防火墙</td><td align="left">service iptables start</td></tr><tr><td align="left">重启防火墙</td><td align="left">service iptables restart</td></tr><tr><td align="left">永久关闭防火墙</td><td align="left">chkconfig iptables off</td></tr><tr><td align="left">永久关闭后启用</td><td align="left">chkconfig iptables on</td></tr><tr><td align="left">查看防火墙状态</td><td align="left">service iptables status</td></tr></tbody></table></div></div><h3 id="自启动服务"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/package-manage#自启动服务"><span class="icon icon-link"></span></a><code>自启动服务</code></h3><p><code>1. chkconfig</code></p><ul><li>chkconfig --list</li><li>chkconfig [--level 运行级别] [独立服务名] [on|off]</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">chkconfig</span><span class="token plain"> --list </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function">grep</span><span class="token plain"> nginx</span></div><div class="token-line"><span class="token plain"></span><span class="token function">chkconfig</span><span class="token plain"> --level </span><span class="token number">2345</span><span class="token plain"> nginx on</span></div><div class="token-line"><span class="token plain"></span><span class="token function">chkconfig</span><span class="token plain"> nginx off</span></div></pre></div><p><code>2. ntsysv</code></p><ul><li>Red Hat 公司遵循 GPL 规则所开发的程序，它具有互动式操作界面，您可以轻易地利用方向键和空格键等，开启，关闭操作系统在每个执行等级中，设置系统的各种服务。</li></ul><p><code>3. /etc/rc.d/rc.local</code></p><ul><li>/etc/rc.d/rc.local 是系统启动之后把所有的服务都启动完在用户看到登录之前执行的命令</li><li>/etc/rc.local</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">/etc/rc.d/rc.local</span></div><div class="token-line"><span class="token plain">/etc/init.d/nginx start</span></div></pre></div><h2 id="yum在线管理"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/package-manage#yum在线管理"><span class="icon icon-link"></span></a><code>YUM在线管理</code></h2><ul><li>yum = Yellow dog Updater, Modified 主要功能是更方便的添加/删除/更新 RPM 包.它能自动解决包的倚赖性问题.</li><li>这是 rpm 包的在线管理命令</li><li>将所有的软件名放到官方服务器上，当进行 YUM 在线安装时，可以自动解决依赖性问题</li><li>/etc/yum.repos.d/<ul><li>CentOS-Base.repo</li><li>epel.repo</li></ul></li></ul><h2 id="yum命令"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/package-manage#yum命令"><span class="icon icon-link"></span></a><code>YUM命令</code></h2><ul><li>yum 安装只需要写包名即可</li></ul><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">命令</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">yum list</td><td align="left">查询所有可用软件包列表</td></tr><tr><td align="left">yum search</td><td align="left">关键字 搜索服务器上所有和关键字相关的包</td></tr><tr><td align="left">yum -y install 包名</td><td align="left">-y 自动回答 yes install 安装</td></tr><tr><td align="left">yum -y update 包名</td><td align="left">-y 自动回答 yes update 升级</td></tr><tr><td align="left">yum -y remove 包名</td><td align="left">-y 自动回答 yes remove 卸载,卸载有依赖性，所以尽量不要卸载</td></tr><tr><td align="left">yum grouplist</td><td align="left">列出所有可用的软件组列表</td></tr><tr><td align="left">yum groupinstall</td><td align="left">软件组名 安装指定的组，组名可以用 grouplist 查询</td></tr><tr><td align="left">yum groupremove</td><td align="left">软件组名 卸载指定软件组</td></tr></tbody></table></div></div><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">yum -y </span><span class="token function">install</span><span class="token plain"> gcc  </span><span class="token comment"># 安装C语言安装包</span></div></pre></div><h2 id="源码包服务管理"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/package-manage#源码包服务管理"><span class="icon icon-link"></span></a><code>源码包服务管理</code></h2><ul><li>使用绝对路径，调用启动脚本来启动。</li><li>不同的源码包的启动脚本不一样</li><li>要通过阅读源码包安装说明的方式来查看启动的方法</li></ul><h3 id="安装nginx"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/package-manage#安装nginx"><span class="icon icon-link"></span></a><code>安装nginx</code></h3><p><code>1. root安装依赖</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">yum </span><span class="token function">install</span><span class="token plain"> gcc gcc-c++ perl -y</span></div></pre></div><p><code>2. 下载源文件</code></p><ul><li>PCRE</li><li><a target="_blank" rel="noopener noreferrer" href="http://www.pcre.org/">官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/">FTP<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="https://sourceforge.net/projects/pcre/files/pcre/">HTTP<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">wget</span><span class="token plain"> ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.43.tar.gz</span></div></pre></div><ul><li>zlib</li><li><a target="_blank" rel="noopener noreferrer" href="http://www.zlib.net/">官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="http://prdownloads.sourceforge.net/libpng/zlib-1.2.11.tar.gz">HTTP<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">wget</span><span class="token plain"> http://prdownloads.sourceforge.net/libpng/zlib-1.2.11.tar.gz</span></div></pre></div><ul><li>openssl</li><li><a target="_blank" rel="noopener noreferrer" href="https://www.openssl.org/">官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">wget</span><span class="token plain"> https://www.openssl.org/source/openssl-1.0.2n.tar.gz</span></div></pre></div><ul><li>ngnix</li><li><a target="_blank" rel="noopener noreferrer" href="http://nginx.org/en/docs/configure.html">官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">wget</span><span class="token plain"> http://nginx.org/download/nginx-1.10.1.tar.gz</span></div></pre></div><p><code>3. 解压文件</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">tar</span><span class="token plain"> -zxvf nginx-1.10.1.tar.gz</span></div><div class="token-line"><span class="token plain"></span><span class="token function">tar</span><span class="token plain"> -zxvf openssl-1.0.2h.tar.gz</span></div><div class="token-line"><span class="token plain"></span><span class="token function">tar</span><span class="token plain"> -zxvf pcre-8.43.tar.gz</span></div><div class="token-line"><span class="token plain"></span><span class="token function">tar</span><span class="token plain"> -zxvf zlib-1.2.11.tar.gz</span></div></pre></div><p><code>4. 配置和安装</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token builtin class-name">cd</span><span class="token plain"> nginx-1.10.1</span></div><div class="token-line"><span class="token plain">./configure --prefix</span><span class="token operator">=</span><span class="token plain">/usr/local/nginx </span><span class="token punctuation">\</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">--pid-path</span><span class="token operator">=</span><span class="token plain">/usr/local/nginx/nginx.pid </span><span class="token punctuation">\</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">--error-log-path</span><span class="token operator">=</span><span class="token plain">/usr/local/nginx/error.log </span><span class="token punctuation">\</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">--http-log-path</span><span class="token operator">=</span><span class="token plain">/usr/local/nginx/access.log </span><span class="token punctuation">\</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">--with-http_ssl_module </span><span class="token punctuation">\</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">--with-mail --with-mail_ssl_module </span><span class="token punctuation">\</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">--with-stream --with-threads </span><span class="token punctuation">\</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">--user</span><span class="token operator">=</span><span class="token plain">comex --group</span><span class="token operator">=</span><span class="token plain">comexgroup </span><span class="token punctuation">\</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">--with-pcre</span><span class="token operator">=</span><span class="token plain">/root/package/pcre-8.43 </span><span class="token punctuation">\</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">--with-zlib</span><span class="token operator">=</span><span class="token plain">/root/package/zlib-1.2.11 </span><span class="token punctuation">\</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">--with-openssl</span><span class="token operator">=</span><span class="token plain">/root/package/openssl-1.0.2n</span></div><div class="token-line"><span class="token plain"></span><span class="token function">make</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function">make</span><span class="token plain"> </span><span class="token function">install</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token function">sudo</span><span class="token plain"> /home/www/nginx/sbin/nginx -t</span></div><div class="token-line"><span class="token plain">nginx: </span><span class="token punctuation">[</span><span class="token plain">emerg</span><span class="token punctuation">]</span><span class="token plain"> getpwnam</span><span class="token punctuation">(</span><span class="token string">&quot;comex&quot;</span><span class="token punctuation">)</span><span class="token plain"> failed</span></div><div class="token-line"><span class="token plain"></span><span class="token function">vi</span><span class="token plain"> /home/www/nginx/conf/nginx.conf</span></div><div class="token-line"><span class="token plain">user  www</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">sudo</span><span class="token plain"> /home/www/nginx/sbin/nginx</span></div></pre></div><p><code>5. 管理命令</code></p><p>功能 命令启动 /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf 从容停止 ps -ef grep nginx;kill -QUIT 2072 快速停止 ps -ef grep nginx;kill -TERM 2132; kill -INT 2132 强制停止 pkill -9 nginx 验证 nginx 配置文件是否正确 nginx -t 重启 Nginx 服务 nginx -s reload 查找当前 nginx 进程号 kill -HUP 进程号</p><p><code>6. 自动启动</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">vi</span><span class="token plain"> /etc/rc.local</span></div><div class="token-line"><span class="token plain">/home/www/nginx/sbin/nginx</span></div></pre></div><p><code>7. service</code></p><ul><li>Nginx 启动、关闭、重新加载脚本</li><li>创建文件 etc/init.d/nginx</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">/etc/init.d/nginx start</span></div><div class="token-line"><span class="token plain"></span><span class="token function">service</span><span class="token plain"> nginx start</span></div></pre></div><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token shebang important">#! /bin/bash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># chkconfig: 35 86 76</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># description: nginx manager</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># Default-Start:     2 3 4 5</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># Default-Stop:      0 1 6</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># Short-Description: starts the nginx web server</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token plain">nginx</span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">DAEMON</span><span class="token operator">=</span><span class="token plain">/usr/local/nginx/sbin/</span><span class="token variable">$NAME</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">CONFIGFILE</span><span class="token operator">=</span><span class="token plain">/usr/local/nginx/conf/</span><span class="token variable">$NAME</span><span class="token plain">.conf</span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">PIDFILE</span><span class="token operator">=</span><span class="token plain">/usr/local/nginx/logs/</span><span class="token variable">$NAME</span><span class="token plain">.pid</span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">SCRIPTNAME</span><span class="token operator">=</span><span class="token plain">/etc/init.d/</span><span class="token variable">$NAME</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">set</span><span class="token plain"> -e</span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"> -x </span><span class="token string">&quot;</span><span class="token string variable">$DAEMON</span><span class="token string">&quot;</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">exit</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token function-name function">do_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token variable">$DAEMON</span><span class="token plain"> -c </span><span class="token variable">$CONFIGFILE</span><span class="token plain">  </span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> -n </span><span class="token string">&quot;nginx already running&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token variable">$(</span><span class="token variable function">ps</span><span class="token variable"> -ef </span><span class="token variable operator">|</span><span class="token variable"> </span><span class="token variable function">grep</span><span class="token variable"> nginx </span><span class="token variable operator">|</span><span class="token variable"> </span><span class="token variable function">grep</span><span class="token variable"> master </span><span class="token variable operator">|</span><span class="token variable"> </span><span class="token variable function">awk</span><span class="token variable"> </span><span class="token variable string">&#x27;{print $2}&#x27;</span><span class="token variable">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$pid</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token string">&quot;</span><span class="token string variable">$PIDFILE</span><span class="token string">&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token function-name function">do_stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token function">kill</span><span class="token plain"> -INT </span><span class="token variable">`</span><span class="token variable function">cat</span><span class="token variable"> $PIDFILE</span><span class="token variable">`</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> -n </span><span class="token string">&quot;nginx not running&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token function-name function">do_reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token function">kill</span><span class="token plain"> -HUP </span><span class="token variable">`</span><span class="token variable function">cat</span><span class="token variable"> $PIDFILE</span><span class="token variable">`</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> -n </span><span class="token string">&quot;nginx can&#x27;t reload&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">case</span><span class="token plain"> </span><span class="token string">&quot;</span><span class="token string variable">$1</span><span class="token string">&quot;</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> start</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> -n </span><span class="token string">&quot;Starting  </span><span class="token string variable">$NAME</span><span class="token string">&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> do_start</span></div><div class="token-line"><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;.&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> stop</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> -n </span><span class="token string">&quot;Stopping  </span><span class="token string variable">$NAME</span><span class="token string">&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> do_stop</span></div><div class="token-line"><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;.&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> reload</span><span class="token operator">|</span><span class="token plain">graceful</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> -n </span><span class="token string">&quot;Reloading  configuration&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> do_reload</span></div><div class="token-line"><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;.&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> restart</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> -n </span><span class="token string">&quot;Restarting  </span><span class="token string variable">$NAME</span><span class="token string">&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> do_stop</span></div><div class="token-line"><span class="token plain"> do_start</span></div><div class="token-line"><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;.&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> *</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;Usage: </span><span class="token string variable">$SCRIPTNAME</span><span class="token string"> {start|stop|reload|restart}&quot;</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token builtin class-name">exit</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">esac</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">exit</span><span class="token plain"> </span><span class="token number">0</span></div></pre></div><p><code>8. chkconfig 和 ntsysv</code></p><ul><li>指定 nginx 脚本可以被 chkconfig 命令和 ntsysv 管理</li><li>添加 nginx, chkconfig --add nginx</li><li>配置脚本<ul><li>/etc/init.d/nginx</li><li>/etc/rc3.d</li><li>chkconconfig 运行级别 启动顺序 关闭顺序</li></ul></li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token shebang important">#! /bin/bash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># chkconfig: 35 86 76</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># description: nginx manager</span></div></pre></div></div><div class="__dumi-default-layout-footer-meta"><span data-updated-text="Last update: ">9/24/2022 08:46:20</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/umi.js"></script>
  </body>
</html>
