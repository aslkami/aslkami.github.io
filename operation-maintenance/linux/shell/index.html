<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <meta
      name="keywords"
      content="dumi, umijs, aslkami, 安了个装, 樂下独舞, 七步定投"
    />
    <meta name="description" content="dumi, 记录个人js知识点, 七步定投" />
    <link rel="shortcut icon" type="image/x-icon" href="/images/hunter.jpeg" />
    <link rel="stylesheet" href="/umi.a58e5324.css" />
    <script>
      window.routerBase = "/";
    </script>
    <script>
      //! umi version: 3.5.42
    </script>
    <script>
      !(function () {
        var e =
            navigator.cookieEnabled && void 0 !== window.localStorage
              ? localStorage.getItem("dumi:prefers-color")
              : "auto",
          o = window.matchMedia("(prefers-color-scheme: dark)").matches,
          t = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === t[2] ? (o ? t[1] : t[0]) : t.indexOf(e) > -1 ? e : t[0]
        );
      })();
    </script>
    <title>Shell - 安了个装</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/operation-maintenance/linux/shell" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/images/hunter.jpeg&#x27;)" href="/">安了个装</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span><a href="/base">基础</a></span><span><a href="/node">Node</a><ul><li><a href="/node/base">Node 基础</a></li><li><a href="/node/promise">Promise</a></li></ul></span><span><a aria-current="page" class="active" href="/operation-maintenance">前端运维</a></span><span><a href="/pack-tool">前端工程化</a></span><span><a href="/react">React</a></span><span><a href="/css">CSS</a></span><span><a href="/question">问题汇总</a></span><span><a target="_blank" rel="noopener noreferrer" href="https://aslkami-vue.netlify.app/">Vue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span><span>隐秘的角落<ul><li><a target="_blank" rel="noopener noreferrer" href="https://aslkami.gatsbyjs.io">gatsby 博客<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="https://aslkami.netlify.app">hexo 博客<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="/fund">投资理财</a></li><li><a href="/insurance">保险</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://juejin.cn/user/536217405113208">掘金<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/aslkami/aslkami.github.io">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></span><div class="__dumi-default-navbar-tool"><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/images/hunter.jpeg&#x27;)" href="/"></a><h1>安了个装</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/base">基础</a></li><li><a href="/node">Node</a><ul><li><a href="/node/base">Node 基础</a></li><li><a href="/node/promise">Promise</a></li></ul></li><li><a aria-current="page" class="active" href="/operation-maintenance">前端运维</a></li><li><a href="/pack-tool">前端工程化</a></li><li><a href="/react">React</a></li><li><a href="/css">CSS</a></li><li><a href="/question">问题汇总</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://aslkami-vue.netlify.app/">Vue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li>隐秘的角落<ul><li><a target="_blank" rel="noopener noreferrer" href="https://aslkami.gatsbyjs.io">gatsby 博客<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="https://aslkami.netlify.app">hexo 博客<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="/fund">投资理财</a></li><li><a href="/insurance">保险</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://juejin.cn/user/536217405113208">掘金<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/aslkami/aslkami.github.io">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a href="/operation-maintenance/cicd">CICD</a><ul><li><a href="/operation-maintenance/cicd"><span>持续集成</span></a></li></ul></li><li><a href="/operation-maintenance/docker">Docker</a><ul><li><a href="/operation-maintenance/docker/introduce"><span>Docker 介绍</span></a></li><li><a href="/operation-maintenance/docker/base"><span>Docker 基础</span></a></li><li><a href="/operation-maintenance/docker/advance"><span>Docker 进阶</span></a></li><li><a href="/operation-maintenance/docker/project"><span>Node 项目</span></a></li></ul></li><li><a href="/operation-maintenance/k8s">K8S</a><ul><li><a href="/operation-maintenance/k8s"><span>k8s 入门</span></a></li><li><a href="/operation-maintenance/k8s/base"><span>k8s 基础</span></a></li><li><a href="/operation-maintenance/k8s/advance"><span>k8s 进阶</span></a></li><li><a href="/operation-maintenance/k8s/project"><span>项目实战</span></a></li></ul></li><li><a aria-current="page" class="active" href="/operation-maintenance/linux">Linux</a><ul><li><a href="/operation-maintenance/linux"><span>基础</span></a></li><li><a href="/operation-maintenance/linux/vi-editor"><span>Vi 编辑器</span></a></li><li><a href="/operation-maintenance/linux/user-group"><span>用户和用户组</span></a></li><li><a href="/operation-maintenance/linux/auth"><span>权限</span></a></li><li><a aria-current="page" class="active" href="/operation-maintenance/linux/shell"><span>Shell</span></a></li><li><a href="/operation-maintenance/linux/package-manage"><span>服务与包管理</span></a></li><li><a href="/operation-maintenance/linux/system"><span>linux 进程</span></a></li><li><a href="/operation-maintenance/linux/network"><span>网络</span></a></li><li><a href="/operation-maintenance/linux/install"><span>常用软件安装</span></a></li></ul></li><li><a href="/operation-maintenance/nginx">Nginx</a><ul><li><a href="/operation-maintenance/nginx/introduce"><span>Nginx 介绍</span></a></li><li><a href="/operation-maintenance/nginx/base"><span>Nginx 基础</span></a></li><li><a href="/operation-maintenance/nginx/advance"><span>Nginx 进阶</span></a></li></ul></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="Shell 基础" data-depth="2"><a href="/operation-maintenance/linux/shell#shell-基础"><span>Shell 基础</span></a></li><li title="echo" data-depth="3"><a href="/operation-maintenance/linux/shell#echo"><span>echo</span></a></li><li title="编写执行shell" data-depth="3"><a href="/operation-maintenance/linux/shell#编写执行shell"><span>编写执行shell</span></a></li><li title="别名" data-depth="3"><a href="/operation-maintenance/linux/shell#别名"><span>别名</span></a></li><li title="命令的生效顺序" data-depth="3"><a href="/operation-maintenance/linux/shell#命令的生效顺序"><span>命令的生效顺序</span></a></li><li title="命令快捷键" data-depth="3"><a href="/operation-maintenance/linux/shell#命令快捷键"><span>命令快捷键</span></a></li><li title="历史命令" data-depth="3"><a href="/operation-maintenance/linux/shell#历史命令"><span>历史命令</span></a></li><li title="调用" data-depth="3"><a href="/operation-maintenance/linux/shell#调用"><span>调用</span></a></li><li title="输出重定向" data-depth="3"><a href="/operation-maintenance/linux/shell#输出重定向"><span>输出重定向</span></a></li><li title="管道符号" data-depth="3"><a href="/operation-maintenance/linux/shell#管道符号"><span>管道符号</span></a></li><li title="变量" data-depth="2"><a href="/operation-maintenance/linux/shell#变量"><span>变量</span></a></li><li title="什么是变量" data-depth="3"><a href="/operation-maintenance/linux/shell#什么是变量"><span>什么是变量</span></a></li><li title="变量的分类" data-depth="3"><a href="/operation-maintenance/linux/shell#变量的分类"><span>变量的分类</span></a></li><li title="用户自定义变量" data-depth="3"><a href="/operation-maintenance/linux/shell#用户自定义变量"><span>用户自定义变量</span></a></li><li title="环境变量" data-depth="3"><a href="/operation-maintenance/linux/shell#环境变量"><span>环境变量</span></a></li><li title="位置参数变量" data-depth="3"><a href="/operation-maintenance/linux/shell#位置参数变量"><span>位置参数变量</span></a></li><li title="预定义变量" data-depth="3"><a href="/operation-maintenance/linux/shell#预定义变量"><span>预定义变量</span></a></li><li title="read" data-depth="3"><a href="/operation-maintenance/linux/shell#read"><span>read</span></a></li><li title="运算符" data-depth="2"><a href="/operation-maintenance/linux/shell#运算符"><span>运算符</span></a></li><li title="declare命令" data-depth="3"><a href="/operation-maintenance/linux/shell#declare命令"><span>declare命令</span></a></li><li title="数值运算的方法" data-depth="3"><a href="/operation-maintenance/linux/shell#数值运算的方法"><span>数值运算的方法</span></a></li><li title=" 环境变量配置文件" data-depth="2"><a href="/operation-maintenance/linux/shell#环境变量配置文件"><span> 环境变量配置文件</span></a></li><li title="source 命令" data-depth="3"><a href="/operation-maintenance/linux/shell#source-命令"><span>source 命令</span></a></li><li title="环境变量配置文件简介" data-depth="3"><a href="/operation-maintenance/linux/shell#环境变量配置文件简介"><span>环境变量配置文件简介</span></a></li><li title="环境变量配置文件的功能" data-depth="3"><a href="/operation-maintenance/linux/shell#环境变量配置文件的功能"><span>环境变量配置文件的功能</span></a></li><li title="正则表达式" data-depth="2"><a href="/operation-maintenance/linux/shell#正则表达式"><span>正则表达式</span></a></li><li title="概念" data-depth="3"><a href="/operation-maintenance/linux/shell#概念"><span>概念</span></a></li><li title="通配符" data-depth="3"><a href="/operation-maintenance/linux/shell#通配符"><span>通配符</span></a></li><li title="正则表达式" data-depth="3"><a href="/operation-maintenance/linux/shell#正则表达式-1"><span>正则表达式</span></a></li><li title="元字符" data-depth="3"><a href="/operation-maintenance/linux/shell#元字符"><span>元字符</span></a></li><li title="cut" data-depth="3"><a href="/operation-maintenance/linux/shell#cut"><span>cut</span></a></li><li title="printf" data-depth="3"><a href="/operation-maintenance/linux/shell#printf"><span>printf</span></a></li><li title="awk" data-depth="3"><a href="/operation-maintenance/linux/shell#awk"><span>awk</span></a></li><li title="sed命令" data-depth="3"><a href="/operation-maintenance/linux/shell#sed命令"><span>sed命令</span></a></li><li title="排序命令sort" data-depth="3"><a href="/operation-maintenance/linux/shell#排序命令sort"><span>排序命令sort</span></a></li><li title="wc" data-depth="3"><a href="/operation-maintenance/linux/shell#wc"><span>wc</span></a></li><li title="流程控制" data-depth="2"><a href="/operation-maintenance/linux/shell#流程控制"><span>流程控制</span></a></li><li title="条件判断" data-depth="3"><a href="/operation-maintenance/linux/shell#条件判断"><span>条件判断</span></a></li><li title="单分支if语句" data-depth="3"><a href="/operation-maintenance/linux/shell#单分支if语句"><span>单分支if语句</span></a></li><li title="双分支if语句" data-depth="3"><a href="/operation-maintenance/linux/shell#双分支if语句"><span>双分支if语句</span></a></li><li title="多分支if语句" data-depth="3"><a href="/operation-maintenance/linux/shell#多分支if语句"><span>多分支if语句</span></a></li><li title="case 语句" data-depth="3"><a href="/operation-maintenance/linux/shell#case-语句"><span>case 语句</span></a></li><li title="for循环" data-depth="3"><a href="/operation-maintenance/linux/shell#for循环"><span>for循环</span></a></li><li title=" while循环" data-depth="3"><a href="/operation-maintenance/linux/shell#while循环"><span> while循环</span></a></li><li title="until循环" data-depth="3"><a href="/operation-maintenance/linux/shell#until循环"><span>until循环</span></a></li><li title="函数" data-depth="2"><a href="/operation-maintenance/linux/shell#函数"><span>函数</span></a></li><li title="简单函数" data-depth="3"><a href="/operation-maintenance/linux/shell#简单函数"><span>简单函数</span></a></li><li title="返回值" data-depth="3"><a href="/operation-maintenance/linux/shell#返回值"><span>返回值</span></a></li><li title="参数说明" data-depth="3"><a href="/operation-maintenance/linux/shell#参数说明"><span>参数说明</span></a></li><li title="shell实战" data-depth="2"><a href="/operation-maintenance/linux/shell#shell实战"><span>shell实战</span></a></li><li title="注意事项" data-depth="3"><a href="/operation-maintenance/linux/shell#注意事项"><span>注意事项</span></a></li><li title="检查主机存活状态" data-depth="3"><a href="/operation-maintenance/linux/shell#检查主机存活状态"><span>检查主机存活状态</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h2 id="shell-基础"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#shell-基础"><span class="icon icon-link"></span></a><code>Shell 基础</code></h2><ul><li>shell 是一个命令行解释器，它为用户提供了一个向 Linux 内核发送请求以便运行程序的界面系统级程序</li><li>用户可以用 Shell 来启动、挂起、停止或者编写一些程序</li><li>Shell 还是一个功能相当强大的编程语言，易编写，易调试，灵活性较强。</li><li>Shell 是解释执行的脚本语言，在 Shell 中可以直接调用 Linux 系统命令。</li></ul><h3 id="echo"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#echo"><span class="icon icon-link"></span></a><code>echo</code></h3><ul><li>输出命令</li><li>-e：激活转义字符</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token builtin class-name">echo</span><span class="token plain"> hello</span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> -e </span><span class="token string">&quot;a</span><span class="token string entity">\t</span><span class="token string">b&quot;</span></div></pre></div><h3 id="编写执行shell"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#编写执行shell"><span class="icon icon-link"></span></a><code>编写执行shell</code></h3><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># hello.sh</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> hello</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 通过Bash调用执行脚本</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">sh</span><span class="token plain"> hello.sh</span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 赋予执行权限，直接运行</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">chmod</span><span class="token plain"> </span><span class="token number">755</span><span class="token plain"> hello.sh</span></div><div class="token-line"><span class="token plain"></span><span class="token function">chmod</span><span class="token plain"> u+x hello.sh</span></div><div class="token-line"><span class="token plain">./hello.sh</span></div></pre></div><h3 id="别名"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#别名"><span class="icon icon-link"></span></a><code>别名</code></h3><ul><li>命令别名就是小名</li><li>临时生效 alias cp=&quot;cp -i&quot;</li><li>写入环境变量配置文件 vi ~/.bashrc</li><li>source ~/.bashrc</li><li>删除别名 unalias 别名</li></ul><h3 id="命令的生效顺序"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#命令的生效顺序"><span class="icon icon-link"></span></a><code>命令的生效顺序</code></h3><ul><li>绝对路径或者相对路径</li><li>别名</li><li>bash 内部命令</li><li>按照$PATH 环境变量定义的目录查找顺序找到的第一个命令</li></ul><h3 id="命令快捷键"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#命令快捷键"><span class="icon icon-link"></span></a><code>命令快捷键</code></h3><ul><li>ctrl+c 强制终止当前命令</li><li>ctrl+l 清屏</li><li>ctrl+a 光标移动到命令行首</li><li>ctrl+e 光标移动到命令行尾</li><li>ctrl+u 从光标所在的位置删除到行首</li></ul><h3 id="历史命令"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#历史命令"><span class="icon icon-link"></span></a><code>历史命令</code></h3><ul><li><p>history [选项] [历史命令保存文件]</p></li><li><p>选项</p><ul><li>-c 清空历史命令</li><li>-w 把缓存中的历史命令写入历史命令保存文件 ~/.bash_history -</li></ul></li><li><p>默认保存 1000 条 /etc/profile HISSIZE=10000</p></li></ul><h3 id="调用"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#调用"><span class="icon icon-link"></span></a><code>调用</code></h3><ul><li>使用上下箭头调用以前的历史命令</li><li>使用 !n 重复执行第 n 条历史命令</li><li>使用 !! 重复执行上一条命令</li><li>使用 !字符 重复执行最后一条以该字符串开头的命令</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">history</span><span class="token plain"> -c</span></div><div class="token-line"><span class="token plain"></span><span class="token number">1</span><span class="token plain">  </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token number">2</span><span class="token plain">  </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token number">3</span><span class="token plain">  </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token operator">!</span><span class="token number">2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token operator">!</span><span class="token operator">!</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token operator">!</span><span class="token plain">echo</span></div></pre></div><h3 id="输出重定向"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#输出重定向"><span class="icon icon-link"></span></a><code>输出重定向</code></h3><ul><li>标准输入输出</li></ul><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">设备</th><th align="left">设备文件名</th><th align="left">文件描述符</th><th align="left">类型</th></tr></thead><tbody><tr><td align="left">键盘</td><td align="left">/dev/stdin</td><td align="left">0</td><td align="left">标准输入</td></tr><tr><td align="left">显示器</td><td align="left">/dev/stdout</td><td align="left">1</td><td align="left">标准输出</td></tr><tr><td align="left">显示器</td><td align="left">/dev/stderr</td><td align="left">2</td><td align="left">标准错误输出</td></tr></tbody></table></div></div><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">类型</th><th align="left">符号</th><th align="left">作用</th></tr></thead><tbody><tr><td align="left">标准输出重定向</td><td align="left">命令 &gt; 文件</td><td align="left">以覆盖的方式，把命令的正确输出输出到指定的文件或设备当中</td></tr><tr><td align="left">标准输出重定向</td><td align="left">命令 &gt;&gt; 文件</td><td align="left">以追加的方式，把命令的正确输出输出到指定的文件或设备当中</td></tr><tr><td align="left">错误输出重定向</td><td align="left">命令&gt;文件</td><td align="left">以覆盖的方式，把命令的错误输出输出到指定的文件或设备当中</td></tr><tr><td align="left">错误输出重定向</td><td align="left">命令&gt;&gt;文件</td><td align="left">以追加的方式，把命令的错误输出输出到指定的文件或设备当中</td></tr><tr><td align="left">正确输出和错误输出同时保存</td><td align="left">命令&gt;文件 2&gt;&amp;1</td><td align="left">以覆盖的方式，把正确输出和错误输出都保存到同一个文件当中</td></tr><tr><td align="left">正确输出和错误输出同时保存</td><td align="left">命令&gt;文件 2&gt;&gt;&amp;1</td><td align="left">以追加的方式，把正确输出和错误输出都保存到同一个文件当中</td></tr><tr><td align="left">正确输出和错误输出同时保存</td><td align="left">命令&amp;&gt;文件</td><td align="left">以覆盖的方式，把正确输出和错误输出都保存到同一个文件当中</td></tr><tr><td align="left">正确输出和错误输出同时保存</td><td align="left">命令&amp;&gt;&gt;文件</td><td align="left">以追加的方式，把正确输出和错误输出都保存到同一个文件当中</td></tr><tr><td align="left">正确输出和错误输出同时保存</td><td align="left">命令&gt;&gt;文件 1 2&gt;文件 2</td><td align="left">以覆盖的方式，正确的输出追加到文件 1 中，把错误输出追加到文件 2 中</td></tr></tbody></table></div></div><ul><li><p>输入重定向</p><ul><li>wc 命令的功能为统计指定文件中的行数、字数、字节数, 并将统计结果显示输出</li><li>命令 &lt; 文件把文件做为命令的输入</li><li>wc &lt; a.txt</li></ul></li></ul><h3 id="管道符号"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#管道符号"><span class="icon icon-link"></span></a><code>管道符号</code></h3><ul><li>多命令顺序执行</li></ul><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">多命令执行符</th><th align="left">格式</th><th align="left">作用</th><th align="left">案例</th></tr></thead><tbody><tr><td align="left">;</td><td align="left">命令 1;命令 2</td><td align="left">多个命令执行，命令之间没有任何逻辑联系</td><td align="left">echo 1;echo 2;</td></tr><tr><td align="left">&amp;&amp;</td><td align="left">命令 1&amp;&amp;命令 2</td><td align="left">逻辑与 当命令 1 正确执行，则命令 2 才会执行 当命令 1 执行不正确，则命令 2 不会执行</td><td align="left">echo 1&amp;&amp;echo 2;</td></tr><tr><td align="left">||</td><td align="left">命令 1 || 命令 2</td><td align="left">逻辑或 当命令 1 执行不正确，则命令 2 才会执行 当命令 1 正确执行，则命令 2 不会执行</td><td align="left">echo 1 || echo 2;</td></tr></tbody></table></div></div><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token number">1</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token number">1</span><span class="token operator">||</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">;</span></div></pre></div><ul><li><p>管道符号</p><ul><li>命令 1 的正确输出会作为命令 2 的操作对象</li><li>命令 1|命令 2</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">ls</span><span class="token plain"> /etc/ </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function">more</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">netstat</span><span class="token plain"> -an </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function">grep</span><span class="token plain"> ESTABLISHED </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function">wc</span><span class="token plain"> -l</span></div></pre></div></li><li><p>通配符</p><ul><li>匹配文件名和目录名</li></ul></li></ul><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">通配符</th><th align="left">作用</th></tr></thead><tbody><tr><td align="left">?</td><td align="left">匹配一个任意字符</td></tr><tr><td align="left">*</td><td align="left">匹配 0 个或任意字符，也就是可以匹配任意内容</td></tr><tr><td align="left">[]</td><td align="left">匹配中括号中任意一个字符</td></tr><tr><td align="left">[-] 匹配中括号中任意一个字符,-</td><td align="left">代表范围</td></tr><tr><td align="left">[^]</td><td align="left">匹配不是中括号中的一个字符</td></tr></tbody></table></div></div><ul><li>其它符号</li></ul><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">符号</th><th align="left">作用</th></tr></thead><tbody><tr><td align="left">&#x27;&#x27; 单引号。在单引号中所有的特殊符号，如$和`</td><td align="left">都没有特殊含义</td></tr><tr><td align="left">&quot;&quot; 双引号，在双引号里特殊符号都没有特殊含义，但是 $ ` \</td><td align="left">例外，拥有调用变量值，引用命令和转义的含义</td></tr><tr><td align="left"></td><td align="left">反引号，扩起来的是系统命令</td></tr><tr><td align="left">$()</td><td align="left">和反引号一样</td></tr><tr><td align="left"># 在 shell 脚本中，#</td><td align="left">开头的行代表注释</td></tr><tr><td align="left">$</td><td align="left">用于调用变量的值</td></tr><tr><td align="left">\</td><td align="left">转义符号</td></tr></tbody></table></div></div><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&#x27;$PATH&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;</span><span class="token string environment constant">$PATH</span><span class="token string">&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">`</span><span class="token variable function">ls</span><span class="token variable">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$(</span><span class="token variable function">ls</span><span class="token variable">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> -e </span><span class="token string">&quot;a</span><span class="token string entity">\t</span><span class="token string">b&quot;</span></div></pre></div><h2 id="变量"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#变量"><span class="icon icon-link"></span></a><code>变量</code></h2><h3 id="什么是变量"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#什么是变量"><span class="icon icon-link"></span></a><code>什么是变量</code></h3><ul><li>可以变化的量</li><li>变量必须以字母或下划线开头，名字中间只能由字母，数字和下划线组成</li><li>变量名的长度不得超过 255 个字符</li><li>变量名在有效范围内必须唯一</li><li>变量默认类型都是字符串</li></ul><h3 id="变量的分类"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#变量的分类"><span class="icon icon-link"></span></a><code>变量的分类</code></h3><ul><li>字符串</li><li>整型</li><li>浮点型</li><li>日期型</li></ul><h3 id="用户自定义变量"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#用户自定义变量"><span class="icon icon-link"></span></a><code>用户自定义变量</code></h3><ul><li><p>这些变量的值是自己定义的</p></li><li><p>变量名不能为数字开头</p></li><li><p>等号左右两边不能有空格</p><ul><li>定义变量</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;aslkami&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">10</span></div></pre></div><ul><li>输出变量值</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token builtin class-name">echo</span><span class="token plain"> $变量名</span></div></pre></div><ul><li>值默认都是字符串</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">$ </span><span class="token assign-left variable">x</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token assign-left variable">y</span><span class="token operator">=</span><span class="token number">2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token assign-left variable">z</span><span class="token operator">=</span><span class="token number">3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token assign-left variable">k</span><span class="token operator">=</span><span class="token variable">$x</span><span class="token plain">+</span><span class="token variable">$y</span><span class="token plain">+</span><span class="token variable">$z</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$k</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token number">1</span><span class="token plain">+2+3</span></div></pre></div><ul><li>在赋值的时候引用变</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token assign-left variable">m</span><span class="token operator">=</span><span class="token string">&quot;</span><span class="token string variable">$x</span><span class="token string">&quot;</span><span class="token number">2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">n</span><span class="token operator">=</span><span class="token variable">${x}</span><span class="token number">2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$m</span><span class="token plain"> </span><span class="token variable">$n</span></div></pre></div><ul><li>set<ul><li>查询系统中默认所有已经生效的变量，包括系统变量,也包括自定义变量</li></ul></li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token builtin class-name">set</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function">grep</span><span class="token plain"> aslkami</span></div></pre></div><ul><li>unset, 删除变量</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token builtin class-name">unset</span><span class="token plain"> a</span></div></pre></div></li></ul><h3 id="环境变量"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#环境变量"><span class="icon icon-link"></span></a><code>环境变量</code></h3><ul><li>环境变量是全局变量，而自定义变量是局部变量</li><li>自定义变量会在当前的 shell 中生效，而环境变量会在当前 shell 以及其子 shell 中生效</li><li>这种变量主要保存的是和系统操作环境相关的数据</li><li>变量可以自定义，但是对系统生效的环境变量名和变量作用是固定的</li></ul><p><code>1. 自定义环境变量</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token builtin class-name">export</span><span class="token plain"> 变量名</span><span class="token operator">=</span><span class="token plain">变量值</span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable">envName</span><span class="token operator">=</span><span class="token plain">prod</span></div></pre></div><p><code>2. env</code></p><ul><li>仅仅用来查看环境变量，而不看到本地变量</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">env</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function">grep</span><span class="token plain"> envName</span></div></pre></div><p><code>3. 常用环境变量</code></p><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">变量名</th><th align="left">含义</th><th align="left">示例</th></tr></thead><tbody><tr><td align="left">HOSTNAME</td><td align="left">主机名</td><td align="left">HOSTNAME=localhost</td></tr><tr><td align="left">SHELL</td><td align="left">当前的 shell</td><td align="left">SHELL=/bin/bash</td></tr><tr><td align="left">HISTSIZE</td><td align="left">历史命令条数</td><td align="left">HISTSIZE=1000</td></tr><tr><td align="left">SSH_CLIENT</td><td align="left">当前操作环境如果是用 SSH 连接的话，这里会记录客户端 IP SSH_CLIENT=192.168.1.100 57596</td><td align="left">22</td></tr><tr><td align="left">USER</td><td align="left">当前登录的用户</td><td align="left">USER=root</td></tr></tbody></table></div></div><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token environment constant">$HOSTNAME</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token environment constant">$SHELL</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token environment constant">$HISTSIZE</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$SSH_CLIENT</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token environment constant">$USER</span></div></pre></div><p><code>4. path</code></p><ul><li>系统搜索路径</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># echo $PATH</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">/usr/lib/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin</span></div></pre></div><ul><li>如果想把一个自定义的脚本直接可以执行，或者把这个文件拷贝到目标目录下，或者把脚本所在目录添加到环境变量中的 PATH 路径中</li><li>/root/shells/hello.sh</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> hello</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable environment constant">PATH</span><span class="token operator">=</span><span class="token string">&quot;</span><span class="token string environment constant">$PATH</span><span class="token string">&quot;</span><span class="token plain">:/root/shells</span></div><div class="token-line"><span class="token plain">hello.sh</span></div></pre></div><p><code>5. 语系环境变量</code></p><ul><li>查询当前系统语系</li><li>在 Linux 中通过 locale 来设置程序运行的不同语言环境，locale 由 ANSI C 提供支持。locale 的命名规则为&lt;语言&gt;_&lt;地区&gt;.&lt;字符集编码&gt;，如 zh_CN.UTF-8，zh 代表中文，CN 代表大陆地区，UTF-8 表示字符集。</li><li>LANG: 定义系统主语系的变量</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">locale</span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable environment constant">LANG</span><span class="token operator">=</span><span class="token plain">zh_CN.UTF-8</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token environment constant">$LANG</span></div></pre></div><p><code>6. 中文支持</code></p><ul><li>图形界面可以支持中文</li><li>第三方工具比如 xshell 语系设置正确可以支持中文</li><li>虚拟机中的纯字符界面不支持中文</li></ul><h3 id="位置参数变量"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#位置参数变量"><span class="icon icon-link"></span></a><code>位置参数变量</code></h3><ul><li>这种变量主要是用来向脚本当中传递参数或数据的,变量名不能自定义,变量作用是固定的</li></ul><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">位置参数变量</th><th align="left">作用</th></tr></thead><tbody><tr><td align="left">$n</td><td align="left">n 为数字，<span class="math math-inline"><mjx-container className="MathJax" jax="SVG"><svg style="vertical-align:-0.452ex" xmlns="http://www.w3.org/2000/svg" width="16.968ex" height="2.149ex" role="img" focusable="false" viewBox="0 -750 7500 950" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-1-TEX-N-30"></use></g><g data-mml-node="mi" transform="translate(500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">代</text></g><g data-mml-node="mi" transform="translate(1500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">表</text></g><g data-mml-node="mi" transform="translate(2500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">命</text></g><g data-mml-node="mi" transform="translate(3500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">令</text></g><g data-mml-node="mi" transform="translate(4500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">本</text></g><g data-mml-node="mi" transform="translate(5500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">身</text></g><g data-mml-node="mi" transform="translate(6500,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">，</text></g></g></g></svg></mjx-container></span>1-<span class="math math-inline"><mjx-container className="MathJax" jax="SVG"><svg style="vertical-align:-0.452ex" xmlns="http://www.w3.org/2000/svg" width="58.698ex" height="2.149ex" role="img" focusable="false" viewBox="0 -750 25944.7 950" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-2-TEX-N-39" d="M352 287Q304 211 232 211Q154 211 104 270T44 396Q42 412 42 436V444Q42 537 111 606Q171 666 243 666Q245 666 249 666T257 665H261Q273 665 286 663T323 651T370 619T413 560Q456 472 456 334Q456 194 396 97Q361 41 312 10T208 -22Q147 -22 108 7T68 93T121 149Q143 149 158 135T173 96Q173 78 164 65T148 49T135 44L131 43Q131 41 138 37T164 27T206 22H212Q272 22 313 86Q352 142 352 280V287ZM244 248Q292 248 321 297T351 430Q351 508 343 542Q341 552 337 562T323 588T293 615T246 625Q208 625 181 598Q160 576 154 546T147 441Q147 358 152 329T172 282Q197 248 244 248Z"></path><path id="MJX-2-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-2-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-2-TEX-N-2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="39" xlink:href="#MJX-2-TEX-N-39"></use></g><g data-mml-node="mi" transform="translate(500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">代</text></g><g data-mml-node="mi" transform="translate(1500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">表</text></g><g data-mml-node="mi" transform="translate(2500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">第</text></g><g data-mml-node="mn" transform="translate(3500,0)"><use data-c="31" xlink:href="#MJX-2-TEX-N-31"></use></g><g data-mml-node="mi" transform="translate(4000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">到</text></g><g data-mml-node="mi" transform="translate(5000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">第</text></g><g data-mml-node="mn" transform="translate(6000,0)"><use data-c="39" xlink:href="#MJX-2-TEX-N-39"></use></g><g data-mml-node="mi" transform="translate(6500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">个</text></g><g data-mml-node="mi" transform="translate(7500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">参</text></g><g data-mml-node="mi" transform="translate(8500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">数</text></g><g data-mml-node="mi" transform="translate(9500,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">，</text></g><g data-mml-node="mn" transform="translate(10500,0)"><use data-c="31" xlink:href="#MJX-2-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-2-TEX-N-30" transform="translate(500,0)"></use></g><g data-mml-node="mi" transform="translate(11500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">以</text></g><g data-mml-node="mi" transform="translate(12500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">上</text></g><g data-mml-node="mi" transform="translate(13500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">的</text></g><g data-mml-node="mi" transform="translate(14500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">参</text></g><g data-mml-node="mi" transform="translate(15500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">数</text></g><g data-mml-node="mi" transform="translate(16500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">需</text></g><g data-mml-node="mi" transform="translate(17500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">要</text></g><g data-mml-node="mi" transform="translate(18500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">用</text></g><g data-mml-node="mi" transform="translate(19500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">大</text></g><g data-mml-node="mi" transform="translate(20500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">括</text></g><g data-mml-node="mi" transform="translate(21500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">号</text></g><g data-mml-node="mi" transform="translate(22500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">包</text></g><g data-mml-node="mi" transform="translate(23500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">含</text></g><g data-mml-node="mo" transform="translate(24500,0)"><use data-c="2C" xlink:href="#MJX-2-TEX-N-2C"></use></g><g data-mml-node="mi" transform="translate(24944.7,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">如</text></g></g></g></svg></mjx-container></span>{<!-- -->10<!-- -->}</td></tr><tr><td align="left">$*</td><td align="left">这个变量代表命令中所有的参数，$*把所有的变看数看成一个整体</td></tr><tr><td align="left">$@</td><td align="left">这个变量也代表命令行中所有的参数，不过$@把每个参数进行区分</td></tr><tr><td align="left">$#</td><td align="left">这个变量代表命令行中所有参数的个数</td></tr></tbody></table></div></div><p>sum.sh</p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">num1</span><span class="token operator">=</span><span class="token variable">$1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">num2</span><span class="token operator">=</span><span class="token variable">$2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token variable">$((</span><span class="token variable">num1</span><span class="token variable operator">+</span><span class="token variable">num2</span><span class="token variable">))</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$sum</span></div></pre></div><p>vi for.sh</p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">for</span><span class="token plain"> </span><span class="token for-or-select variable">i</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> </span><span class="token string">&quot;</span><span class="token string variable">$@</span><span class="token string">&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token keyword">do</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;i=</span><span class="token string variable">$i</span><span class="token string">&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token keyword">done</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># excute</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">sh</span><span class="token plain"> for.sh </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">2</span></div></pre></div><p>vi for2.sh</p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">for</span><span class="token plain"> </span><span class="token for-or-select variable">i</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> </span><span class="token string">&quot;</span><span class="token string variable">$#</span><span class="token string">&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token keyword">do</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;i=</span><span class="token string variable">$i</span><span class="token string">&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token keyword">done</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># excute</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">sh</span><span class="token plain"> for2.sh </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">3</span></div></pre></div><p>vi for3.sh</p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;</span><span class="token string variable">$#</span><span class="token string">&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># excute</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">sh</span><span class="token plain"> for3.sh </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token number">3</span></div></pre></div><h3 id="预定义变量"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#预定义变量"><span class="icon icon-link"></span></a><code>预定义变量</code></h3><ul><li>是脚本中已经定义好的变量，变量名不能自定义，变量作用也是固定的</li></ul><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">位置参数变量</th><th align="left">作用</th></tr></thead><tbody><tr><td align="left">$?</td><td align="left">最后一次执行的命令的返回状态。0 表示正确执行，非 0 表示不正确执行</td></tr><tr><td align="left">$$</td><td align="left">当前进程的进程号(PID)</td></tr></tbody></table></div></div><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$?</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$$</span></div></pre></div><h3 id="read"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#read"><span class="icon icon-link"></span></a><code>read</code></h3><ul><li>read [选项] [变量名]</li></ul><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">选项</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">-p</td><td align="left">提示信息，在等待 read 输入时，输出提示信息</td></tr><tr><td align="left">-t</td><td align="left">f 秒数: read 命令会一直等待用户输入，使用此选项可以指定等待时间</td></tr><tr><td align="left">-n</td><td align="left">字符数，read 命令只接受指定的字符数，就会执行</td></tr><tr><td align="left">-s</td><td align="left">隐藏输入的数据，适用于机密信息的输入</td></tr></tbody></table></div></div><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">read</span><span class="token plain"> -p </span><span class="token string">&#x27;please input your name:&#x27;</span><span class="token plain"> -t </span><span class="token number">5</span><span class="token plain"> name</span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> -e </span><span class="token string">&quot;</span><span class="token string entity">\n</span><span class="token string">&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">read</span><span class="token plain"> -p </span><span class="token string">&#x27;please input you gender[m/f]:&#x27;</span><span class="token plain"> -n </span><span class="token number">1</span><span class="token plain"> gender</span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> -e </span><span class="token string">&quot;</span><span class="token string entity">\n</span><span class="token string">&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">read</span><span class="token plain"> -p </span><span class="token string">&#x27;please input your password:&#x27;</span><span class="token plain"> -s password</span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> -e </span><span class="token string">&quot;</span><span class="token string entity">\n</span><span class="token string">&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$name</span><span class="token plain">,</span><span class="token variable">$gender</span><span class="token plain">,</span><span class="token variable">$password</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># excute</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">sh</span><span class="token plain"> read.sh</span></div></pre></div><h2 id="运算符"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#运算符"><span class="icon icon-link"></span></a><code>运算符</code></h2><ul><li>弱类型并且默认是字符串类型</li></ul><h3 id="declare命令"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#declare命令"><span class="icon icon-link"></span></a><code>declare命令</code></h3><p><code>1. declare命令</code></p><ul><li>用来声明变量类型</li><li>declare [+/-] [选项] 变量名</li></ul><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">选项</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">-</td><td align="left">给变量设定类型属性</td></tr><tr><td align="left">+</td><td align="left">取消变量的类型属性</td></tr><tr><td align="left">-a</td><td align="left">将变量声明为数组类型</td></tr><tr><td align="left">-i</td><td align="left">将变量声明为整数型</td></tr><tr><td align="left">-x</td><td align="left">将变量声明为环境变量</td></tr><tr><td align="left">-r</td><td align="left">将变量声明为只读变量</td></tr><tr><td align="left">-p</td><td align="left">显示指定变量的被声明的类型</td></tr></tbody></table></div></div><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token number">2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">c</span><span class="token operator">=</span><span class="token variable">$a</span><span class="token plain">+</span><span class="token variable">$b</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$c</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token number">1</span><span class="token plain">+2</span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">declare</span><span class="token plain"> -i </span><span class="token assign-left variable">c</span><span class="token operator">=</span><span class="token variable">$a</span><span class="token plain">+</span><span class="token variable">$b</span><span class="token plain"> </span><span class="token comment"># 声明成整型</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$c</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token number">3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">declare</span><span class="token plain"> +i c </span><span class="token comment"># 取消变量的类型属性</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">c</span><span class="token operator">=</span><span class="token variable">$a</span><span class="token plain">+</span><span class="token variable">$b</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$c</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token number">1</span><span class="token plain">+2</span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">declare</span><span class="token plain"> -i </span><span class="token assign-left variable">c</span><span class="token operator">=</span><span class="token string">&quot;3&quot;</span><span class="token plain"> </span><span class="token comment"># 给变量设定类型属性</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">declare</span><span class="token plain"> -p c </span><span class="token comment"># 显示指定变量的被声明的类型</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># declare -i c=&quot;3&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 声明环境变量</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">declare</span><span class="token plain"> -x </span><span class="token assign-left variable">kk</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">set</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function">grep</span><span class="token plain"> kk      </span><span class="token comment"># 查看所有变量</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">env</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function">grep</span><span class="token plain"> kk      </span><span class="token comment"># 只查看系统变量</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">declare</span><span class="token plain"> -r x </span><span class="token comment"># 只读</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">x</span><span class="token operator">=</span><span class="token number">2</span><span class="token plain">  </span><span class="token comment"># bash: x: readonly variable</span></div></pre></div><p><code>2. 数组</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># 声明为数组类型</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">declare</span><span class="token plain"> -a names</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">names</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token plain">zhangsan</span></div><div class="token-line"><span class="token plain">names</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token plain">lisi</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 默认只打印第一个元素</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">${names}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">zhangsan</span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 打印第2个元素</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">${names</span><span class="token variable punctuation">[</span><span class="token variable">1</span><span class="token variable punctuation">]</span><span class="token variable">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">lisi</span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 打印全部</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">${names</span><span class="token variable punctuation">[</span><span class="token variable">*</span><span class="token variable punctuation">]</span><span class="token variable">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">zhangsan lisi</span></div></pre></div><p><code>3. 声明环境变量</code></p><ul><li>export 最终执行的是 declare -x 命令</li><li>declare -p 可以查看所有的类型</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token plain">aslkami</span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">declare</span><span class="token plain"> -x </span><span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token plain">aslkami</span></div></pre></div><p><code>4. 只读属性</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token builtin class-name">declare</span><span class="token plain"> -r </span><span class="token assign-left variable">gender</span><span class="token operator">=</span><span class="token plain">m</span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">gender</span><span class="token operator">=</span><span class="token plain">f</span></div><div class="token-line"><span class="token plain">-bash: gender: </span><span class="token builtin class-name">readonly</span><span class="token plain"> variable</span></div></pre></div><p><code>5. 查询变量属性</code></p><ul><li>declare -p 查询所有变量的属性</li><li>declare -p 变量名 查询指定变量的属性</li></ul><h3 id="数值运算的方法"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#数值运算的方法"><span class="icon icon-link"></span></a><code>数值运算的方法</code></h3><ul><li>只要用 declare 声明变量的时候指定类型就可以进行数值运算</li></ul><p><code>1. expr或let </code></p><ul><li>+ 号左右两侧必须有空格,否则还是整块输出</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token assign-left variable">num1</span><span class="token operator">=</span><span class="token number">2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">num2</span><span class="token operator">=</span><span class="token number">3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token variable">$(</span><span class="token variable function">expr</span><span class="token variable"> $num1 + $num2</span><span class="token variable">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$sum</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token number">5</span></div></pre></div><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token assign-left variable">sum2</span><span class="token operator">=</span><span class="token variable">$((</span><span class="token variable">$num1</span><span class="token variable operator">+</span><span class="token variable">$num2</span><span class="token variable">))</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$sum2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token number">5</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">sum3</span><span class="token operator">=</span><span class="token plain">$</span><span class="token punctuation">[</span><span class="token variable">$num1</span><span class="token plain">+</span><span class="token variable">$num2</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$sum3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token number">5</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">d</span><span class="token operator">=</span><span class="token variable">$(</span><span class="token variable function">date</span><span class="token variable">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$d</span></div></pre></div><p><code>2. 优先级</code></p><p><img src="/images/linux/linux-priority.png" alt="运算符"/></p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token variable">$((</span><span class="token variable punctuation">(</span><span class="token variable number">1</span><span class="token variable operator">+</span><span class="token variable number">2</span><span class="token variable punctuation">)</span><span class="token variable operator">*</span><span class="token variable number">4</span><span class="token variable operator">/</span><span class="token variable number">2</span><span class="token variable">))</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$result</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token number">6</span></div></pre></div><h2 id="环境变量配置文件"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#环境变量配置文件"><span class="icon icon-link"></span></a><code> 环境变量配置文件</code></h2><h3 id="source-命令"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#source-命令"><span class="icon icon-link"></span></a><code>source 命令</code></h3><ul><li>修改完配置文件后，必须注销重新登录才能生效，使用 source 命令可以不用重新登录</li><li>source 配置文件</li><li>. 配置文件</li></ul><h3 id="环境变量配置文件简介"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#环境变量配置文件简介"><span class="icon icon-link"></span></a><code>环境变量配置文件简介</code></h3><ul><li>PATH、HISTSIZE、PS1、HOSTNAME 等环境变量写入对应的环境变量配置文件</li><li>环境变量配置文件中主要是定义地系统操作环境生效的系统默认环境变量，如 PATH 等此文件登录时起作用的环境变量</li></ul><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">路径</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">/etc/profile</td><td align="left"></td></tr><tr><td align="left">/etc/bashrc</td><td align="left"></td></tr><tr><td align="left">~/.bash_profile</td><td align="left">只会对当前用户生效</td></tr><tr><td align="left">~/.bashrc</td><td align="left">只会对当前用户生效</td></tr></tbody></table></div></div><p><img src="/images/linux/linux-path.png" alt="环境变量路径"/></p><h3 id="环境变量配置文件的功能"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#环境变量配置文件的功能"><span class="icon icon-link"></span></a><code>环境变量配置文件的功能</code></h3><p><code>1. /etc/profile</code></p><ul><li>在这里修改系统变量</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">cat</span><span class="token plain">  /etc/profile </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function">grep</span><span class="token plain"> </span><span class="token environment constant">USER</span></div></pre></div><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">变量名</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">USER</td><td align="left">用户名</td></tr><tr><td align="left">LOGNAME</td><td align="left">登录名</td></tr><tr><td align="left">MAIL</td><td align="left">邮箱地址</td></tr><tr><td align="left">PATH</td><td align="left">查找路径</td></tr><tr><td align="left">HOSTNAME</td><td align="left">主机名</td></tr><tr><td align="left">umask</td><td align="left">权限掩码</td></tr><tr><td align="left">/etc/profile.d/*.sh</td><td align="left"></td></tr></tbody></table></div></div><p><code>2. ~/.bash_profile</code></p><ul><li>在这里修改 PATH 路径</li><li>调用 ~/.bashrc</li></ul><p><code>3. ~/.bashrc</code></p><ul><li>在这里改别名,配置 alias</li><li>调用 /etc/bashrc</li></ul><p><code>4. /etc/bashrc</code></p><ul><li>PS1 登录提示符在这里修改</li><li>umask</li><li>PATH 变量</li><li>调用 /etc/profile.d/*.sh 文件</li></ul><p><code>5. 其它配置文件</code></p><ul><li><p>注销时生效的环境变量配置文件</p><ul><li>~/.bash_logout</li></ul></li><li><p>脚本历史</p><ul><li>当正确退出计算机的时候会历史记录会写入文件</li><li>~/.bash_history</li></ul></li><li><p>Shell 登录信息</p><ul><li>本地终端欢迎信息 /etc/issue</li><li>远程终端欢迎信息 /etc/issue.net</li><li>不管远程还是本地都可以生效 /etc/motd</li></ul></li></ul><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">参数</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">\d</td><td align="left">当前系统日期</td></tr><tr><td align="left">\s</td><td align="left">显示操作系统名称</td></tr><tr><td align="left">\l</td><td align="left">显示登录的终端号</td></tr><tr><td align="left">\m</td><td align="left">显示硬件体系结构，如 i386 等</td></tr><tr><td align="left">\n</td><td align="left">显示主机名</td></tr><tr><td align="left">\o</td><td align="left">显示域名</td></tr><tr><td align="left">\r</td><td align="left">显示内核版本</td></tr><tr><td align="left">\t</td><td align="left">显示当前系统时间</td></tr><tr><td align="left">\u</td><td align="left">显示当前登录用户的序列号</td></tr></tbody></table></div></div><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">vi</span><span class="token plain"> /etc/ssh/sshd_config</span></div><div class="token-line"><span class="token plain">Banner /etc/issue.net</span></div><div class="token-line"><span class="token plain"></span><span class="token function">service</span><span class="token plain"> sshd restart</span></div></pre></div><h2 id="正则表达式"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#正则表达式"><span class="icon icon-link"></span></a><code>正则表达式</code></h2><p><a target="_blank" rel="noopener noreferrer" href="https://regexper.com/">regexper<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><h3 id="概念"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#概念"><span class="icon icon-link"></span></a><code>概念</code></h3><ul><li>正则表达式是用于描述字符排列和匹配模式的一种语法规则</li><li>它主要用于字符串的模式分割、匹配查找及替换操作</li></ul><h3 id="通配符"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#通配符"><span class="icon icon-link"></span></a><code>通配符</code></h3><ul><li>通配符用来匹配符合条件的文件名，通配符是完全匹配。</li><li>ls find 这些命令不支持正则，只能使用通配符</li></ul><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">符号</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">?</td><td align="left">匹配任意一个字符</td></tr><tr><td align="left">*</td><td align="left">匹配任意多个字符</td></tr><tr><td align="left">[]</td><td align="left">匹配中括号中范围内的一个字符</td></tr></tbody></table></div></div><h3 id="正则表达式-1"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#正则表达式-1"><span class="icon icon-link"></span></a><code>正则表达式</code></h3><ul><li>正则表达式是用来在文件中匹配符合条件的字符串，是包含匹配。</li><li>grep awk sed 等都可以支持正则表达式</li></ul><h3 id="元字符"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#元字符"><span class="icon icon-link"></span></a><code>元字符</code></h3><ul><li>alias grep=&#x27;grep --color=auto&#x27;</li></ul><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">元字符</th><th align="left">作用</th><th align="left">示例</th></tr></thead><tbody><tr><td align="left">*</td><td align="left">前一个字符匹配 0 次或任意多次</td><td align="left">grep 1* reg.txt</td></tr><tr><td align="left">.</td><td align="left">匹配除换行符外的任意一个字符</td><td align="left">grep . reg.txt</td></tr><tr><td align="left">^</td><td align="left">匹配行首。例如，^hello 会匹配以 hello 开头的行</td><td align="left">grep ^a reg.txt</td></tr><tr><td align="left">$</td><td align="left">匹配行尾。例如，hello&amp; 会匹配以 hello 结尾的行</td><td align="left">grep a$ reg.txt</td></tr><tr><td align="left">[]</td><td align="left">匹配屮柄号屮指定的任意一个字符，而且只匹配一个字符。例如.[aoeiu]匹配任意一个元音字母， [0-9] 匹配任意一位数字，[a-z][0-9] 匹配由小写字母和一位数字构成的两位字符</td><td align="left">grep ab[bc]c reg.txt</td></tr><tr><td align="left">[^]</td><td align="left">匹配除中括号中的字符以外的任意一个字符。例如，[^0-9] 匹配任意一位非数字字符，[^a-z] 匹配任意一位非小写字母</td><td align="left">grep a[^fg]c reg.txt</td></tr><tr><td align="left">\</td><td align="left">转义符，用于取消特殊符号的含义</td><td align="left">grep .$ reg.txt</td></tr><tr><td align="left">{<!-- -->n<!-- -->}</td><td align="left">表示其前面的字符恰好出现 n 次。例如，[0-9]<!-- -->{<!-- -->4<!-- -->}<!-- --> 匹配 4 位数字，[1][3-8][0-9]<!-- -->{<!-- -->9<!-- -->}<!-- --> 匹配手机号码</td><td align="left">grep &quot;a<!-- -->{<!-- -->1<!-- -->}<!-- -->&quot; reg.txt</td></tr><tr><td align="left">{<!-- -->n,<!-- -->}</td><td align="left">表示其前面的字符出现不少于 n 次。例如，[0-9]<!-- -->{<!-- -->2,<!-- -->}<!-- --> 匹配两位及以上的数字</td><td align="left">grep &quot;a<!-- -->{<!-- -->1,<!-- -->}<!-- -->&quot; reg.txt</td></tr><tr><td align="left">{<!-- -->n,m<!-- -->}</td><td align="left">表示其前面的字符至少出现 n 次，最多出现 m 次。例如，[a-z]<!-- -->{<!-- -->6,8<!-- -->}<!-- --> 匹配 6〜8 位的小写字母</td><td align="left">grep &quot;a<!-- -->{<!-- -->2,3<!-- -->}<!-- -->&quot; reg.txt</td></tr></tbody></table></div></div><h3 id="cut"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#cut"><span class="icon icon-link"></span></a><code>cut</code></h3><ul><li>cut 用来提取文本中的某一部分文本</li><li>cut [选项] 文件名<ul><li>-f 列号，用来指定要提取的列</li><li>-d 分隔符，按照指定分隔符分割列,默认分隔符是 TAB 制表符</li></ul></li></ul><p>提取用户名和它使用的 shell</p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">cat</span><span class="token plain"> /etc/passwd </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function">cut</span><span class="token plain"> -f </span><span class="token number">1,7</span><span class="token plain"> -d </span><span class="token builtin class-name">:</span></div></pre></div><h3 id="printf"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#printf"><span class="icon icon-link"></span></a><code>printf</code></h3><ul><li>按规定格式输出</li><li>printf 输出类型 输出内容</li></ul><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">参数</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">%ns</td><td align="left">输出字符串,n 是数字指代输出几个字符</td></tr><tr><td align="left">%ni</td><td align="left">输出整数,n 是指输出几个数字</td></tr><tr><td align="left">%m.nf</td><td align="left">输出浮点数,m 和 n 是数字，指代输出的整数位数和小数位数，如% 6.2f 代表输出 6 位位，2 位小数，4 位整数</td></tr></tbody></table></div></div><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token builtin class-name">printf</span><span class="token plain"> </span><span class="token string">&quot;%s</span><span class="token string entity">\t</span><span class="token string">%s</span><span class="token string entity">\t</span><span class="token string">%s</span><span class="token string entity">\t</span><span class="token string">%s</span><span class="token string entity">\t</span><span class="token string">%s</span><span class="token string entity">\t</span><span class="token string">\%s</span><span class="token string entity">\n</span><span class="token string">&quot;</span><span class="token plain"> </span><span class="token variable">$(</span><span class="token variable function">df</span><span class="token variable"> -h </span><span class="token variable operator">|</span><span class="token variable"> </span><span class="token variable function">grep</span><span class="token variable"> /dev/vda1</span><span class="token variable">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function">cut</span><span class="token plain"> -f </span><span class="token number">1,5</span></div></pre></div><h3 id="awk"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#awk"><span class="icon icon-link"></span></a><code>awk</code></h3><ul><li><p>awk &#x27;条件 1<!-- -->{<!-- -->动作 1<!-- -->}<!-- --> 条件 2<!-- -->{<!-- -->动作 2<!-- -->}<!-- -->...&#x27; 文件名</p></li><li><p>条件(Pattern)</p><ul><li>一般使用关系表达式作为条件</li><li>x &gt; 10 判断变量 x 是否大于 10</li><li>x &gt;=10 大于等于</li><li>x &lt;=10 小于等于</li></ul></li><li><p>动作(Action)</p><ul><li>格式化输出 <span class="math math-inline"><mjx-container className="MathJax" jax="SVG"><svg style="vertical-align:-0.452ex" xmlns="http://www.w3.org/2000/svg" width="5.656ex" height="2.149ex" role="img" focusable="false" viewBox="0 -750 2500 950" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-3-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-3-TEX-N-30"></use></g><g data-mml-node="mi" transform="translate(500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">整</text></g><g data-mml-node="mi" transform="translate(1500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">行</text></g></g></g></svg></mjx-container></span>1 第一列...</li></ul></li><li><p><span class="math math-inline"><mjx-container className="MathJax" jax="SVG"><svg style="vertical-align:-0.452ex" xmlns="http://www.w3.org/2000/svg" width="5.656ex" height="2.149ex" role="img" focusable="false" viewBox="0 -750 2500 950" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-4-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-4-TEX-N-30"></use></g><g data-mml-node="mi" transform="translate(500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">整</text></g><g data-mml-node="mi" transform="translate(1500,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">行</text></g></g></g></svg></mjx-container></span>1 第一列...</p></li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">df</span><span class="token plain"> -h </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function">grep</span><span class="token plain"> /dev/vda1 </span><span class="token operator">|</span><span class="token function">awk</span><span class="token plain"> </span><span class="token string">&#x27;{print $5}&#x27;</span><span class="token operator">|</span><span class="token plain"> </span><span class="token function">cut</span><span class="token plain"> -d </span><span class="token string">&#x27;%&#x27;</span><span class="token plain"> -f </span><span class="token number">1</span></div></pre></div><p><code>1. begin end</code></p><ul><li>awk 可以正确截取制表符和空格</li><li>begin 在所有的输出之前打印</li><li>end 在所有的输出之后打印</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;&quot;</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> numbers.txt</span></div><div class="token-line"><span class="token plain"></span><span class="token function">awk</span><span class="token plain"> </span><span class="token string">&#x27;BEGIN{print &quot;开始&quot;}END{print &quot;结束&quot;}&#x27;</span><span class="token plain"> numbers.txt</span></div></pre></div><p><code>2. FS</code></p><ul><li>Field Separator，字段分隔符</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">awk</span><span class="token plain"> </span><span class="token string">&#x27;BEGIN{FS=&quot;:&quot;}{print $1&quot;\t&quot;$2}&#x27;</span><span class="token plain"> /etc/passwd</span></div></pre></div><p><code>3. 声明变量</code></p><p>numbers.txt</p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token number">1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token number">2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token number">3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token function">awk</span><span class="token plain"> </span><span class="token string">&#x27;BEGIN{sum=0}{sum=sum+$1}END{print sum}&#x27;</span><span class="token plain"> numbers.txt</span></div><div class="token-line"><span class="token plain"></span><span class="token number">6</span></div></pre></div><p><code>4. 多条件</code></p><p>score.txt</p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">zhangsan </span><span class="token number">91</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">li </span><span class="token number">81</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">wangwu </span><span class="token number">71</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token function">awk</span><span class="token plain"> </span><span class="token string">&#x27;$2&gt;90{print $1&quot;\t优秀&quot;}$2&gt;80{print $2&quot;\t良好&quot;}&#x27;</span><span class="token plain"> score.txt</span></div></pre></div><p><code>5. NR</code></p><ul><li>NR,表示 awk 开始执行程序后所读取的数据行数</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">awk</span><span class="token plain"> </span><span class="token string">&#x27;{print NR,$0}&#x27;</span><span class="token plain"> score.txt</span></div></pre></div><p><code>6. OFS</code></p><ul><li>OFS Out of Field Separator，输出字段分隔符</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;i love you&quot;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function">awk</span><span class="token plain"> </span><span class="token string">&#x27;BEGIN{ FS=&quot; &quot;;OFS=&quot;-&quot; }{print $1,$2,$3}&#x27;</span></div></pre></div><h3 id="sed命令"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#sed命令"><span class="icon icon-link"></span></a><code>sed命令</code></h3><ul><li>sed 是一个轻量级编辑器，主要用来对数据进行选取、替换、替换和新增操作</li><li>sed [选项] &#x27;[动作]&#x27; 文件名</li><li>所有的动作都必须用单号号括起来</li><li>类型类似于批量 vi 操作</li></ul><p><code>1. 动作</code></p><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">参数</th><th align="left">含义</th><th align="left">示例</th></tr></thead><tbody><tr><td align="left">a</td><td align="left">追加，在每一行或者指定行下面添加一行或多行</td><td align="left">sed &#x27;1a newline&#x27; score.txt</td></tr><tr><td align="left">c</td><td align="left">行替换，用 c 后面的字符串替换掉原始整个数据行</td><td align="left">sed &#x27;c newline&#x27; score.txt</td></tr><tr><td align="left">s</td><td align="left">字符串替换,用一个字符串替换另外一个字符串，格式为 &quot;行范围 s/旧字符串/新字符串/g&quot;</td><td align="left">sed &#x27;3s/lisi/lisisi/g&#x27; score.txt</td></tr><tr><td align="left">i</td><td align="left">插入，在当前行插入一行或多行</td><td align="left">sed &#x27;1i newline&#x27; score.txt</td></tr><tr><td align="left">d</td><td align="left">删除指定的行</td><td align="left">sed &#x27;1,2d&#x27; score.txt</td></tr><tr><td align="left">p</td><td align="left">打印,输出指定的行</td><td align="left">sed -n &#x27;2p&#x27; score.txt</td></tr></tbody></table></div></div><p><code>2. 选项</code></p><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">参数</th><th align="left">含义</th><th align="left">示例</th></tr></thead><tbody><tr><td align="left">-n</td><td align="left">一般 sed 命令会把所有的数据都输出到屏幕上，如果加入此选项则只会把处理过的行输出到屏幕上</td><td align="left">sed -n &#x27;2p&#x27; score.txt</td></tr><tr><td align="left">-e</td><td align="left">允许对输入数据应用多条 sed 编辑命令</td><td align="left">sed -e &#x27;s/91/92/g;s/81/82/g&#x27; score.txt</td></tr><tr><td align="left">-i</td><td align="left">用 sed 的修改直接修改编辑的文件，而不是在屏幕上输出</td><td align="left">sed -i &#x27;1i newline&#x27; score.txt</td></tr></tbody></table></div></div><h3 id="排序命令sort"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#排序命令sort"><span class="icon icon-link"></span></a><code>排序命令sort</code></h3><ul><li>sort [选项] 文件名</li><li>选项</li></ul><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">选项</th><th align="left">含义</th><th align="left">命令</th></tr></thead><tbody><tr><td align="left">-f</td><td align="left">忽略大小写</td><td align="left">sort -f -t &quot;:&quot; -n -k 5,5 /etc/passwd</td></tr><tr><td align="left">-n</td><td align="left">以数值型进行排序，默认使用字符串顺序</td><td align="left">sort -t &quot;:&quot; -n -k 3,3 /etc/passwd</td></tr><tr><td align="left">-r</td><td align="left">反向排序，默认从小到大</td><td align="left">sort -r /etc/passwd</td></tr><tr><td align="left">-t</td><td align="left">指定分割符，默认分割符是制表符</td><td align="left">sort -t &quot;:&quot; -k 3,3 /etc/passwd</td></tr><tr><td align="left">-k n[,m]</td><td align="left">按照指定的字段范围排序。从第 n 个字段开始，到第 m 个字段结束，默认是到行尾</td><td align="left">sort -t &quot;:&quot; -k 3,3 /etc/passwd</td></tr></tbody></table></div></div><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">sort</span><span class="token plain"> /etc/passwd</span></div><div class="token-line"><span class="token plain"></span><span class="token function">sort</span><span class="token plain"> -r /etc/passwd</span></div><div class="token-line"><span class="token plain"></span><span class="token function">sort</span><span class="token plain"> -t </span><span class="token string">&quot;:&quot;</span><span class="token plain"> -k </span><span class="token number">3,3</span><span class="token plain"> /etc/passwd</span></div></pre></div><h3 id="wc"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#wc"><span class="icon icon-link"></span></a><code>wc</code></h3><ul><li>wc [选项] 文件名, wc wc.txt</li><li>-l 只统计行数</li><li>-w 只允许单词数</li><li>-m 只统计字符数</li></ul><h2 id="流程控制"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#流程控制"><span class="icon icon-link"></span></a><code>流程控制</code></h2><h3 id="条件判断"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#条件判断"><span class="icon icon-link"></span></a><code>条件判断</code></h3><p><code>1. 按照文件类型进行判断</code></p><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">选项</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">-d</td><td align="left">文件是否存在并且是目录</td></tr><tr><td align="left">-e</td><td align="left">文件是否存在</td></tr><tr><td align="left">-f</td><td align="left">文件是否存在并且是普通文件</td></tr><tr><td align="left">-b</td><td align="left">文件是否存在并且是块设备文件</td></tr><tr><td align="left">-c</td><td align="left">文件是否存在并且是字符设备文件</td></tr><tr><td align="left">-L</td><td align="left">文件是否存在并且是链接文件</td></tr><tr><td align="left">-p</td><td align="left">文件是否存在并且是管道文件</td></tr><tr><td align="left">-s</td><td align="left">文件是否存在并且是否为非空</td></tr><tr><td align="left">-S</td><td align="left">文件是否存在并且是套接字文件</td></tr></tbody></table></div></div><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">touch</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">.txt</span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">test</span><span class="token plain"> -e </span><span class="token number">1</span><span class="token plain">.txt</span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain">-e </span><span class="token number">1</span><span class="token plain">.txt</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$?</span></div></pre></div><p>exist.sh</p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">[</span><span class="token plain"> -e </span><span class="token number">1</span><span class="token plain">.txt </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;yes&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;no&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">yes</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"> -e </span><span class="token number">11</span><span class="token plain">.txt </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;yes&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;no&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">no</span></div></pre></div><p><code>2. 按照文件权限进行判断</code></p><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">选项</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">-r</td><td align="left">文件是否存在，并且是否拥有读权限</td></tr><tr><td align="left">-w</td><td align="left">文件是否存在，并且是否拥有写权限</td></tr><tr><td align="left">-x</td><td align="left">文件是否存在，并且是否拥有执行权限</td></tr></tbody></table></div></div><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token builtin class-name">read</span><span class="token plain">  </span><span class="token operator">&gt;</span><span class="token plain"> read.txt</span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token function">write</span><span class="token plain">  </span><span class="token operator">&gt;</span><span class="token plain"> write.txt</span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> execute  </span><span class="token operator">&gt;</span><span class="token plain"> execute.txt</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token function">chmod</span><span class="token plain"> u+w write.txt</span></div><div class="token-line"><span class="token plain"></span><span class="token function">chmod</span><span class="token plain"> u+x execute.txt</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"> -r read.txt </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;read yes&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;no&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"> -w write.txt </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;write yes&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;no&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"> -x execute.txt </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;execute yes&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;no&quot;</span></div></pre></div><p><code>3. 个文件间的比较</code></p><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">选项</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">文件 1</td><td align="left">-nt 文件 2 判断文件 1 的修改时间是否比文件 2 的新</td></tr><tr><td align="left">文件 1</td><td align="left">-ot 文件 2 判断文件 1 的修改时间是否比文件 2 的旧</td></tr><tr><td align="left">文件 1</td><td align="left">-ef 文件 2 判断文件 1 和文件 2 的 inode 号是否一致,可用于判断硬链接</td></tr></tbody></table></div></div><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">[</span><span class="token plain"> write.txt -nt read.txt </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;write is older than read&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;no&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"> read.txt -ot write.txt </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;read is older than write&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;no&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">ln</span><span class="token plain"> execute.txt execute2.txt</span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"> execute.txt -ef execute2.txt </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;execute and execute2.txt are the same&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;no&quot;</span></div></pre></div><p><code>4. 两个整数间的比较</code></p><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">选项</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">整数 1</td><td align="left">-eq 整数 2 判断整数 1 是否和整数 2 相等</td></tr><tr><td align="left">整数 1</td><td align="left">-ne 整数 2 判断整数 1 是否和整数 2 不相等</td></tr><tr><td align="left">整数 1</td><td align="left">-gt 整数 2 判断整数 1 是否大于整数 2</td></tr><tr><td align="left">整数 1</td><td align="left">-lt 整数 2 判断整数 1 是否小于整数 2</td></tr><tr><td align="left">整数 1</td><td align="left">-ge 整数 2 判断整数 1 是否大于等于整数 2</td></tr><tr><td align="left">整数 1</td><td align="left">-le 整数 2 判断整数 1 是否小于等于整数 2</td></tr></tbody></table></div></div><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">[</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> -eq </span><span class="token number">2</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;2==2&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;no&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> -ne </span><span class="token number">2</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;2!=2&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;no&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> -gt </span><span class="token number">2</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;2&gt;2&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;no&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> -lt </span><span class="token number">2</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;2&lt;2&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;no&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> -ge </span><span class="token number">2</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;2&gt;=2&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;no&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> -le </span><span class="token number">2</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;2&lt;=2&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;no&quot;</span></div></pre></div><p><code>5. 字符串的判断</code></p><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">选项</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">-z 字符串</td><td align="left">判断字否串是否为空</td></tr><tr><td align="left">-n 字符中</td><td align="left">判断字符串是否为非空</td></tr><tr><td align="left">字符串 1 == 字符串 2</td><td align="left">判断字符串 1 是否和字符串 2 相等</td></tr><tr><td align="left">字符串 1 != 字符串 2</td><td align="left">判断字符串 1 是否和字符串 2 不相等</td></tr></tbody></table></div></div><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token plain">aslkami</span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"> -z </span><span class="token string">&quot;</span><span class="token string variable">$name</span><span class="token string">&quot;</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;空&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;非空&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"> -n </span><span class="token string">&quot;</span><span class="token string variable">$name</span><span class="token string">&quot;</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;非空&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;空&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">name2</span><span class="token operator">=</span><span class="token plain">aslkami</span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"> </span><span class="token string">&quot;</span><span class="token string variable">$name</span><span class="token string">&quot;</span><span class="token plain"> </span><span class="token operator">==</span><span class="token plain"> </span><span class="token string">&quot;</span><span class="token string variable">$name2</span><span class="token string">&quot;</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;相等&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;不相等&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"> </span><span class="token string">&quot;</span><span class="token string variable">$name</span><span class="token string">&quot;</span><span class="token plain"> </span><span class="token operator">!=</span><span class="token plain"> </span><span class="token string">&quot;</span><span class="token string variable">$name2</span><span class="token string">&quot;</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;不相等&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;相等&quot;</span></div></pre></div><p><code>6. 多重条件判断 </code></p><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">选项</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">判断 1</td><td align="left">-a 判断 2 逻辑与</td></tr><tr><td align="left">判断 1</td><td align="left">-o 判断 2 逻辑或</td></tr><tr><td align="left">!判断</td><td align="left">逻辑非</td></tr></tbody></table></div></div><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">[</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> -gt </span><span class="token number">1</span><span class="token plain"> -a </span><span class="token number">3</span><span class="token plain"> -gt </span><span class="token number">2</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;yes&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;no&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> -gt </span><span class="token number">1</span><span class="token plain"> -a </span><span class="token number">3</span><span class="token plain"> -gt </span><span class="token number">4</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;yes&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;no&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> -gt </span><span class="token number">1</span><span class="token plain"> -o </span><span class="token number">3</span><span class="token plain"> -gt </span><span class="token number">4</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;yes&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;no&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"> </span><span class="token operator">!</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> -gt </span><span class="token number">4</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;yes&quot;</span><span class="token operator">||</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;no&quot;</span></div></pre></div><h3 id="单分支if语句"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#单分支if语句"><span class="icon icon-link"></span></a><code>单分支if语句</code></h3><ul><li>if 语句使用 fi 结尾</li><li>[条件判断式]就是使用 test 命令进行判断，所以中括号和条件判断式之间必须有空格</li><li>then 后面跟符合条件之后执行的程序，可以放在[]之后，用;分隔，也可以换行，不用;</li></ul><p><code>1. 语法</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-sehll"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">if [条件判断];then</span></div><div class="token-line"><span class="token plain"> 代码体</span></div><div class="token-line"><span class="token plain">fi</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">if [条件判断]</span></div><div class="token-line"><span class="token plain">then</span></div><div class="token-line"><span class="token plain"> 代码体</span></div><div class="token-line"><span class="token plain">fi</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">if [ 2 -gt 1 ];then echo bigger; fi</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">if [ 2 -gt 1 ]</span></div><div class="token-line"><span class="token plain">then</span></div><div class="token-line"><span class="token plain"> echo bigger</span></div><div class="token-line"><span class="token plain">fi</span></div></pre></div><p><code>2. 判断当前用户是否是root用户</code></p><p>isRoot.sh</p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token variable">$(</span><span class="token variable function">whoami</span><span class="token variable">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token variable">`</span><span class="token variable function">whoami</span><span class="token variable">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"> </span><span class="token string">&quot;</span><span class="token string variable">$user</span><span class="token string">&quot;</span><span class="token plain"> </span><span class="token operator">==</span><span class="token plain"> root </span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">then</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;我是root用户&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">fi</span></div></pre></div><h3 id="双分支if语句"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#双分支if语句"><span class="icon icon-link"></span></a><code>双分支if语句</code></h3><p><code>1. 语法</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">条件判断</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">then</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> 代码体1</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">else</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> 代码体2</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">fi</span></div></pre></div><p><code>2. 判断是否目录</code></p><p>isDir.sh</p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">read</span><span class="token plain"> -t </span><span class="token number">10</span><span class="token plain"> -p </span><span class="token string">&quot;请输入一个路径&quot;</span><span class="token plain"> </span><span class="token function">dir</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"> -d </span><span class="token string">&quot;</span><span class="token string variable">$dir</span><span class="token string">&quot;</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">then</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;</span><span class="token string variable">$dir</span><span class="token string">是目录&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">else</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;</span><span class="token string variable">$dir</span><span class="token string">不是目录&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">fi</span></div></pre></div><h3 id="多分支if语句"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#多分支if语句"><span class="icon icon-link"></span></a><code>多分支if语句</code></h3><p><code>1. 语法</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">条件判断1</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">then</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> 代码体1</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">elif</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">条件判断2</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> 代码体2</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">else</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> 代码体3</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">fi</span></div></pre></div><p>grade.sh</p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">read</span><span class="token plain"> -p </span><span class="token string">&quot;请输入一个分数&quot;</span><span class="token plain"> grade</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"> </span><span class="token string">&quot;</span><span class="token string variable">$grade</span><span class="token string">&quot;</span><span class="token plain"> -gt </span><span class="token number">90</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token keyword">then</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token builtin class-name">echo</span><span class="token plain"> 优秀</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">elif</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"> </span><span class="token string">&quot;</span><span class="token string variable">$grade</span><span class="token string">&quot;</span><span class="token plain"> -gt </span><span class="token number">80</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">then</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token builtin class-name">echo</span><span class="token plain"> 良</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">else</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token builtin class-name">echo</span><span class="token plain"> 差</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">fi</span></div></pre></div><h3 id="case-语句"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#case-语句"><span class="icon icon-link"></span></a><code>case 语句</code></h3><ul><li>case 和 if 都是多分支判断语句,if 能判断多个条件,case 只能判断一个条件</li></ul><p><code>1. 语法</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">case</span><span class="token plain"> 变量名 </span><span class="token keyword">in</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">值1</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  代码块1</span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">值2</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  代码块2</span></div><div class="token-line"><span class="token plain"> </span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">*</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  代码块3</span></div><div class="token-line"><span class="token plain"> </span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">esac</span></div></pre></div><p>case.sh</p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">read</span><span class="token plain"> -p </span><span class="token string">&quot;yes or no?&quot;</span><span class="token plain"> -t </span><span class="token number">30</span><span class="token plain"> choose</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">case</span><span class="token plain"> </span><span class="token variable">$choose</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token string">&quot;yes&quot;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&#x27;是&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token string">&quot;no&quot;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;否&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  *</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token builtin class-name">echo</span><span class="token plain"> 其它</span></div><div class="token-line"><span class="token plain">   </span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">esac</span></div></pre></div><h3 id="for循环"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#for循环"><span class="icon icon-link"></span></a><code>for循环</code></h3><p><code>1. 语法</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">for</span><span class="token plain"> 变量 </span><span class="token keyword">in</span><span class="token plain"> 值1 值2 值3</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">do</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">代码块</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">done</span></div></pre></div><p>for.sh</p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">for</span><span class="token plain"> </span><span class="token for-or-select variable">i</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">do</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$i</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">done</span></div></pre></div><p><code>2. 语法</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">for</span><span class="token variable punctuation">((</span><span class="token variable">i</span><span class="token variable operator">=</span><span class="token variable number">1</span><span class="token variable punctuation">;</span><span class="token variable">i</span><span class="token variable operator">&lt;=</span><span class="token variable number">10</span><span class="token variable punctuation">;</span><span class="token variable">i</span><span class="token variable operator">++</span><span class="token variable punctuation">))</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">do</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$((</span><span class="token variable">$i</span><span class="token variable">))</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">done</span></div></pre></div><h3 id="while循环"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#while循环"><span class="icon icon-link"></span></a><code> while循环</code></h3><ul><li>while 循环是不定循环，也称为条件循环，只要条件判断成立，就会一直继续</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">while</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">条件判断式</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">do</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> 代码块</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">done</span></div></pre></div><p>while.sh</p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">while</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"> </span><span class="token variable">$i</span><span class="token plain"> -le </span><span class="token number">100</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token keyword">do</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token variable">$((</span><span class="token variable">$result</span><span class="token variable operator">+</span><span class="token variable">i</span><span class="token variable">))</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable">$((</span><span class="token variable">$i</span><span class="token variable operator">+</span><span class="token variable number">1</span><span class="token variable">))</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token keyword">done</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$result</span></div></pre></div><h3 id="until循环"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#until循环"><span class="icon icon-link"></span></a><code>until循环</code></h3><ul><li>直到条件不成立停止</li></ul><p>until.sh</p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">until</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"> </span><span class="token variable">$i</span><span class="token plain"> -gt </span><span class="token number">100</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token keyword">do</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token variable">$((</span><span class="token variable">$result</span><span class="token variable operator">+</span><span class="token variable">i</span><span class="token variable">))</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable">$((</span><span class="token variable">$i</span><span class="token variable operator">+</span><span class="token variable number">1</span><span class="token variable">))</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token keyword">done</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$result</span></div></pre></div><h2 id="函数"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#函数"><span class="icon icon-link"></span></a><code>函数</code></h2><ul><li>linux shell 可以用户定义函数，然后在 shell 脚本中可以随便调用</li><li>可以带 function fun() 定义，也可以直接 fun() 定义,不带任何参数</li><li>调用函数不需要加()</li></ul><h3 id="简单函数"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#简单函数"><span class="icon icon-link"></span></a><code>简单函数</code></h3><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">[</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token plain"> funcName </span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    action</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">[</span><span class="token plain">return int</span><span class="token punctuation">;</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token function-name function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token builtin class-name">echo</span><span class="token plain"> start</span></div><div class="token-line"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> start</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"> </span><span class="token comment">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function-name function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> start</span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">start</span></div></pre></div><h3 id="返回值"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#返回值"><span class="icon icon-link"></span></a><code>返回值</code></h3><ul><li>参数返回，可以显示加：return 返回，如果不加，将以最后一条命令运行结果，作为返回值</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function-name function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token variable">$((</span><span class="token variable">$</span><span class="token variable number">1</span><span class="token variable operator">+</span><span class="token variable">$</span><span class="token variable number">2</span><span class="token variable">))</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token builtin class-name">return</span><span class="token plain"> </span><span class="token variable">$result</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">sum4 </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable">$?</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token number">5</span></div></pre></div><h3 id="参数说明"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#参数说明"><span class="icon icon-link"></span></a><code>参数说明</code></h3><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th align="left">参数处理</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">$#</td><td align="left">传递到脚本的参数个数</td></tr><tr><td align="left">$*</td><td align="left">以一个单字符串显示所有向脚本传递的参数</td></tr><tr><td align="left">$@</td><td align="left">与$*相同，但是使用时加引号，并在引号中返回每个参数</td></tr><tr><td align="left">$$</td><td align="left">脚本运行的当前进程 ID 号</td></tr><tr><td align="left">$?</td><td align="left">显示最后命令的退出状态。0 表示没有错误，其他任何值表明有错误</td></tr></tbody></table></div></div><h2 id="shell实战"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#shell实战"><span class="icon icon-link"></span></a><code>shell实战</code></h2><h3 id="注意事项"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#注意事项"><span class="icon icon-link"></span></a><code>注意事项</code></h3><ul><li>开头加解释器: #/bin/bash 和注释说明</li><li>命名建议规则: 变量名大写、局部变量小写，函数名小写，名字体现出实际作用</li><li>默认变量是全局的，在函数中变量 local 指定为局部变量，避免污染其它作用域</li><li>set -e 遇到执行非 0 时退出脚本, set -x 打印执行过程</li><li>写脚本一定要先测试再上生产环境</li></ul><h3 id="检查主机存活状态"><a aria-hidden="true" tabindex="-1" href="/operation-maintenance/linux/shell#检查主机存活状态"><span class="icon icon-link"></span></a><code>检查主机存活状态</code></h3><p>ip.sh</p><div class="__dumi-default-code-block"><pre class="prism-code language-shell"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">for</span><span class="token plain"> </span><span class="token for-or-select variable">IP</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> </span><span class="token variable">$@</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token keyword">do</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token function">ping</span><span class="token plain"> -c </span><span class="token number">1</span><span class="token plain"> </span><span class="token variable">$IP</span><span class="token plain"> </span><span class="token operator">&amp;&gt;</span><span class="token plain">/dev/null</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token keyword">then</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">     </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;</span><span class="token string variable">$IP</span><span class="token string"> is ok.&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">else</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">     </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string">&quot;</span><span class="token string variable">$IP</span><span class="token string"> is wrong!&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">fi</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">done</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token function">sh</span><span class="token plain"> ip.sh </span><span class="token number">127.0</span><span class="token plain">.0.1</span></div></pre></div><style>
mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
  min-height: 1px;
  min-width: 1px;
}

mjx-container[jax="SVG"] > svg a {
  fill: blue;
  stroke: blue;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][display="true"][width="full"] {
  display: flex;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line], svg[data-table] > g > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame], svg[data-table] > g > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed, svg[data-table] > g > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted, svg[data-table] > g > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > g > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c] {
  stroke-width: 3;
}
</style></div><div class="__dumi-default-layout-footer-meta"><span data-updated-text="Last update: ">8/5/2024 16:07:01</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/umi.fad29cb4.js"></script>
  </body>
</html>
